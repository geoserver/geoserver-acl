{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"GeoServer ACL Documentation","text":""},{"location":"#secure-your-geoserver-with-confidence","title":"Secure Your GeoServer with Confidence","text":"<p>GeoServer ACL is an advanced, high-performance authorization system designed specifically for GeoServer. It replaces the default security subsystem with a robust rule-based engine that offers fine-grained control over your geospatial data.</p> <p>Whether you need to restrict access by workspace, filter data spatially, or mask sensitive attributes, GeoServer ACL provides the flexibility and performance required for enterprise-grade deployments.</p>"},{"location":"#capabilities","title":"Capabilities","text":"<ul> <li>Granular Access Control: Define permissions at the workspace, layer, feature, and attribute levels.</li> <li>Spatial Security: Restrict user access to specific geographic regions\u2014data outside the allowed area is automatically filtered.</li> <li>Attribute Masking: Hide sensitive columns (attributes) from unauthorized users while keeping the rest of the dataset visible.</li> <li>Service-Level Rules: Apply different policies for WMS (viewing) versus WFS (downloading/editing).</li> <li>High Performance: Built for speed with a modern architecture that minimizes overhead on your GeoServer instances.</li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"<p>GeoServer ACL operates as a dedicated authorization service that integrates seamlessly with your GeoServer cluster.</p> <ol> <li>Administrators define prioritized rules specifying who can access what, where, and how.</li> <li>GeoServer (via a lightweight plugin) intercepts every incoming request.</li> <li>The ACL Engine evaluates the request against your rules in milliseconds.</li> <li>Access is Granted or Denied, and data is automatically filtered to match the user's permissions.</li> </ol> <pre><code>flowchart LR\n    %% Nodes\n    User((User / Client))\n    ACL{ACL Engine}\n\n    subgraph Rules [\"Access Policy\"]\n        Logic[\"Who (Actor)&lt;br/&gt;What (Layer)&lt;br/&gt;How (Service)\"]\n    end\n\n    %% Outcomes\n    Full(\"Full Access\")\n    Filtered(\"Filtered View&lt;br/&gt;(Spatial/Attribute)\")\n    Blocked(\"Access Denied\")\n\n    %% Connections\n    User --&gt;|Request| ACL\n    Rules -.-&gt;|Evaluate| ACL\n\n    ACL --&gt;|Allow| Full\n    ACL --&gt;|Limit| Filtered\n    ACL --x|Deny| Blocked\n\n    %% Styles\n    style ACL fill:#349bc4,color:#fff,stroke:#333,stroke-width:2px\n    style Full fill:#4caf50,color:#fff,stroke:none\n    style Filtered fill:#ff9800,color:#fff,stroke:none\n    style Blocked fill:#f44336,color:#fff,stroke:none\n    style Rules fill:transparent,stroke:#999,stroke-dasharray: 5 5</code></pre>"},{"location":"#project-background","title":"Project Background","text":"<p>GeoServer ACL originated as a fork of GeoFence. It retains the proven logic of the original project but rebuilds the underlying architecture for modern deployment needs, offering:</p> <ul> <li>Cloud Native Design: Ready for Docker, Kubernetes, and microservices environments.</li> <li>Modern Tech Stack: Built on Spring Boot 3 and Java 17+.</li> <li>Modular Architecture: Decoupled authorization service for improved maintainability and scalability.</li> </ul>"},{"location":"#get-involved","title":"Get Involved","text":"<p>GeoServer ACL is a community-driven project licensed under the GPL 2.0. We welcome feedback, contributions, and bug reports.</p> <ul> <li>GitHub Repository</li> <li>Issue Tracker</li> <li>GeoServer Community</li> </ul>"},{"location":"admin_guide/","title":"Administrator Guide","text":"<p>This guide is intended for system administrators who are responsible for setting up, configuring, and maintaining GeoServer ACL. It covers installation, configuration, rule management, and integration with other systems.</p>"},{"location":"admin_guide/#what-is-geoserver-acl","title":"What is GeoServer ACL?","text":"<p>GeoServer ACL is an advanced authorization system for GeoServer that provides fine-grained access control to geospatial resources. As an administrator, you'll define rules that determine who can access which resources and with what limitations.</p>"},{"location":"admin_guide/#components","title":"Components","text":"<p>GeoServer ACL consists of two main components:</p> <ol> <li>GeoServer ACL Service: A standalone Spring Boot application that manages and stores access rules, providing a REST API for integration</li> <li>GeoServer ACL Plugin: A plugin for GeoServer that connects to the ACL Service to enforce access rules</li> </ol> <p>These components can be deployed in various configurations:</p> <ul> <li>Standalone: The ACL Service runs independently, and one or more GeoServer instances connect to it</li> <li>Embedded: For simpler deployments, the ACL Service can be embedded within GeoServer</li> <li>Cloud Native: The ACL Service can be deployed as part of a GeoServer Cloud infrastructure</li> </ul>"},{"location":"admin_guide/#administrative-capabilities","title":"Administrative Capabilities","text":"<p>As an administrator, GeoServer ACL allows you to:</p> <ul> <li>Define Data Access Rules: Control who can access which resources</li> <li>Set Administrative Permissions: Define workspace administrators</li> <li>Apply Spatial Restrictions: Limit access to specific geographic areas</li> <li>Filter Attributes: Control which attributes users can see or edit</li> <li>Integrate with Authentication: Work with any authentication system used by GeoServer</li> <li>Automate via REST API: Programmatically manage rules through the REST API</li> </ul>"},{"location":"admin_guide/#administration-workflow","title":"Administration Workflow","text":"<p>The typical administration workflow includes:</p> <ol> <li>Installation and Configuration: Set up the ACL Service and GeoServer Plugin</li> <li>Authentication Integration: Connect to your authentication system</li> <li>Rule Definition: Create and prioritize access rules</li> <li>Testing: Verify that rules work as expected</li> <li>Monitoring: Monitor access and adjust rules as needed</li> </ol>"},{"location":"admin_guide/admin_rule_management/","title":"Admin Rules","text":"<p>Admin Rules control access to GeoServer's administrative functions (Web UI and REST API). They allow for delegated administration of specific workspaces.</p>"},{"location":"admin_guide/admin_rule_management/#rule-specification","title":"Rule Specification","text":"<p>An Admin Rule is a JSON object with the following schema:</p> Field Type Required Description <code>priority</code> Integer Yes Evaluation order (0 is highest priority). Unique per rule. <code>access</code> Enum Yes <code>ADMIN</code>, <code>USER</code>, or <code>GROUP</code>. <code>roleName</code> String No The role this rule applies to. (Use <code>*</code> for all roles). <code>userName</code> String No The specific user this rule applies to. (Use <code>*</code> for all users). <code>workspace</code> String Yes The workspace scope for the permissions. <code>*</code> matches all workspaces. <code>addressRange</code> CIDR No IP address range restriction."},{"location":"admin_guide/admin_rule_management/#access-levels","title":"Access Levels","text":"<ul> <li>ADMIN: Grants full administrative privileges within the scope.<ul> <li>If <code>workspace</code> is <code>*</code>: User is a global administrator.</li> <li>If <code>workspace</code> is specific (e.g., <code>topp</code>): User is a Workspace Administrator for <code>topp</code>.</li> </ul> </li> <li>USER: Grants read-only access to the administrative configuration.</li> <li>GROUP: Grants permission to manage users within a specific group (requires Group Service configuration).</li> </ul>"},{"location":"admin_guide/admin_rule_management/#json-examples","title":"JSON Examples","text":""},{"location":"admin_guide/admin_rule_management/#1-global-system-administrator","title":"1. Global System Administrator","text":"<p>Grants full control over the entire GeoServer instance.</p> <pre><code>{\n  \"priority\": 0,\n  \"access\": \"ADMIN\",\n  \"roleName\": \"ROLE_SYSADMIN\",\n  \"workspace\": \"*\"\n}\n</code></pre>"},{"location":"admin_guide/admin_rule_management/#2-workspace-administrator","title":"2. Workspace Administrator","text":"<p>Allows a user to manage data, layers, and styles only within the <code>engineering</code> workspace.</p> <pre><code>{\n  \"priority\": 100,\n  \"access\": \"ADMIN\",\n  \"userName\": \"eng_lead\",\n  \"workspace\": \"engineering\"\n}\n</code></pre>"},{"location":"admin_guide/admin_rule_management/#3-read-only-auditor","title":"3. Read-Only Auditor","text":"<p>Allows an auditor to view configurations for all workspaces but change nothing.</p> <pre><code>{\n  \"priority\": 500,\n  \"access\": \"USER\",\n  \"roleName\": \"ROLE_AUDITOR\",\n  \"workspace\": \"*\"\n}\n</code></pre>"},{"location":"admin_guide/admin_rule_management/#management-api","title":"Management API","text":"<p>Admin Rules are managed via the REST API at <code>/api/adminrules</code>.</p> <ul> <li>GET /api/adminrules: List all admin rules.</li> <li>POST /api/adminrules: Create a new admin rule.</li> <li>PUT /api/adminrules/{id}: Update an existing admin rule.</li> <li>DELETE /api/adminrules/{id}: Delete an admin rule.</li> </ul>"},{"location":"admin_guide/admin_rule_management/#differences-from-data-rules","title":"Differences from Data Rules","text":"<p>It is critical to distinguish between Admin Rules and Data Rules:</p> <ul> <li>Admin Rules control the configuration (Can I add a layer? Can I change a style?).</li> <li>Data Rules control the content (Can I see the map? Can I query the database?).</li> </ul> <p>A user may have <code>ADMIN</code> rights to a workspace (via Admin Rule) but be denied viewing the actual map data if a specific <code>DENY</code> Data Rule exists for them.</p>"},{"location":"admin_guide/configuration/","title":"Configuration","text":"<p>GeoServer ACL is configured via Spring Boot configuration files (<code>application.yml</code>) or environment variables. This page details the available configuration properties for the ACL Service and the GeoServer Plugin.</p>"},{"location":"admin_guide/configuration/#acl-service-configuration","title":"ACL Service Configuration","text":"<p>The ACL Service (<code>geoserver-acl-app</code>) requires a database connection and basic server settings.</p>"},{"location":"admin_guide/configuration/#database-connection","title":"Database Connection","text":"<p>Configure the connection to the PostgreSQL/PostGIS database.</p> <pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/acldb\n    username: acl\n    password: acl_password\n    driver-class-name: org.postgresql.Driver\n    hikari:\n      maximum-pool-size: 20\n      minimum-idle: 5\n</code></pre>"},{"location":"admin_guide/configuration/#core-acl-settings","title":"Core ACL Settings","text":"Property Default Description <code>geoserver.acl.security.enabled</code> <code>true</code> Enables or disables the security subsystem. <code>geoserver.acl.security.admin-role</code> <code>ADMIN</code> The role name that grants full access to the ACL API. <code>geoserver.acl.default-deny</code> <code>true</code> If <code>true</code>, requests matching no rules are denied. <code>geoserver.acl.cache.enabled</code> <code>true</code> Enables caching of authorization decisions. <code>geoserver.acl.cache.expiration</code> <code>1h</code> Duration before cached decisions expire."},{"location":"admin_guide/configuration/#authentication-modes","title":"Authentication Modes","text":""},{"location":"admin_guide/configuration/#1-internal-authentication-default","title":"1. Internal Authentication (Default)","text":"<p>Uses the internal ACL database to store users and passwords.</p> <pre><code>geoserver:\n  acl:\n    security:\n      internal:\n        enabled: true\n</code></pre>"},{"location":"admin_guide/configuration/#2-pre-authentication-gatewayproxy","title":"2. Pre-Authentication (Gateway/Proxy)","text":"<p>Trusts headers from an upstream identity provider (e.g., OAuth2 Proxy).</p> <pre><code>geoserver:\n  acl:\n    security:\n      preauth:\n        enabled: true\n        user-header: X-Forwarded-User\n        roles-header: X-Forwarded-Roles\n</code></pre>"},{"location":"admin_guide/configuration/#geoserver-plugin-configuration","title":"GeoServer Plugin Configuration","text":"<p>The plugin running inside GeoServer must be configured to talk to the ACL Service. This is done via the GeoServer Admin UI &gt; Security &gt; GeoServer ACL.</p>"},{"location":"admin_guide/configuration/#connection-settings","title":"Connection Settings","text":"Setting Description ACL Service URL The endpoint of the ACL service (e.g., <code>http://acl:8080/acl</code>). Connection Timeout Max time (ms) to wait for a connection to the ACL service. Read Timeout Max time (ms) to wait for a response. Cache Enabled Enables client-side caching of rules within GeoServer to reduce network calls."},{"location":"admin_guide/configuration/#environment-variables","title":"Environment Variables","text":"<p>For Docker deployments, map these environment variables to the container.</p> Variable Maps To <code>SPRING_DATASOURCE_URL</code> <code>spring.datasource.url</code> <code>SPRING_DATASOURCE_USERNAME</code> <code>spring.datasource.username</code> <code>SPRING_DATASOURCE_PASSWORD</code> <code>spring.datasource.password</code> <code>ACL_ADMIN_ROLE</code> <code>geoserver.acl.security.admin-role</code>"},{"location":"admin_guide/configuration/#example-production-applicationyml","title":"Example: Production <code>application.yml</code>","text":"<pre><code>server:\n  port: 8080\n  tomcat:\n    max-threads: 200\n\nspring:\n  datasource:\n    url: jdbc:postgresql://db.prod:5432/acldb\n    username: ${DB_USER}\n    password: ${DB_PASS}\n  cloud:\n    bus: # Enable for multi-instance cache invalidation\n      enabled: true\n      destination: acl-events\n\ngeoserver:\n  acl:\n    security:\n      admin-role: ROLE_SUPERUSER\n      preauth:\n        enabled: true\n    cache:\n      max-size: 50000\n      expiration: 30m\n</code></pre>"},{"location":"admin_guide/filtering/","title":"Advanced Filtering","text":"<p>This guide details the configuration for Spatial and Attribute filtering within Data Access Rules.</p>"},{"location":"admin_guide/filtering/#spatial-filtering","title":"Spatial Filtering","text":"<p>Spatial filtering restricts access to a defined geometric area. It is configured via the <code>ruleLimits</code> object in a rule definition.</p>"},{"location":"admin_guide/filtering/#configuration-schema","title":"Configuration Schema","text":"Field Type Description <code>allowedArea</code> WKT String The geometry (Polygon/MultiPolygon) defining the permitted area. <code>spatialFilterType</code> Enum The strategy for handling features crossing the boundary: <code>INTERSECT</code> or <code>CLIP</code>."},{"location":"admin_guide/filtering/#filter-types","title":"Filter Types","text":"<ul> <li>INTERSECT (Default): Returns complete features if they spatially interact with the <code>allowedArea</code>.<ul> <li>Performance: Fast. Uses database spatial indexes.</li> <li>Use Case: Standard row-level security.</li> </ul> </li> <li>CLIP: Geometrically crops features to the <code>allowedArea</code>.<ul> <li>Performance: Slower. Requires CPU-intensive geometry intersection calculations per feature.</li> <li>Use Case: Strict security where users must not see geometry outside the boundary.</li> </ul> </li> </ul>"},{"location":"admin_guide/filtering/#json-example","title":"JSON Example","text":"<pre><code>{\n  \"access\": \"LIMIT\",\n  \"ruleLimits\": {\n    \"allowedArea\": \"POLYGON((-105 40, -104 40, -104 41, -105 41, -105 40))\",\n    \"spatialFilterType\": \"CLIP\"\n  }\n}\n</code></pre>"},{"location":"admin_guide/filtering/#attribute-filtering","title":"Attribute Filtering","text":"<p>Attribute filtering hides specific columns from the output. It is configured via the <code>layerDetails</code> object.</p>"},{"location":"admin_guide/filtering/#configuration-schema_1","title":"Configuration Schema","text":"Field Type Description <code>attributes</code> Object Container for attribute rules. <code>accessType</code> Enum <code>READONLY</code> or <code>READWRITE</code>. <code>includedAttributes</code> Array Allow-list of visible attributes. <code>excludedAttributes</code> Array Block-list of hidden attributes. <p>Note: Use either <code>includedAttributes</code> OR <code>excludedAttributes</code>, not both.</p>"},{"location":"admin_guide/filtering/#json-example-exclude-mode","title":"JSON Example (Exclude Mode)","text":"<pre><code>{\n  \"access\": \"LIMIT\",\n  \"layerDetails\": {\n    \"attributes\": {\n      \"accessType\": \"READONLY\",\n      \"excludedAttributes\": [\"social_security_number\", \"salary\"]\n    }\n  }\n}\n</code></pre>"},{"location":"admin_guide/filtering/#additional-constraints","title":"Additional Constraints","text":""},{"location":"admin_guide/filtering/#coordinate-reference-system-crs","title":"Coordinate Reference System (CRS)","text":"<p>Restricts the output CRS users can request (e.g., to prevent reprojection load).</p> <pre><code>{\n  \"access\": \"LIMIT\",\n  \"ruleLimits\": {\n    \"allowedCRS\": [\"EPSG:4326\", \"EPSG:3857\"]\n  }\n}\n</code></pre>"},{"location":"admin_guide/filtering/#catalog-mode","title":"Catalog Mode","text":"<p>Controls how restricted layers appear in the capabilities document.</p> Mode Description <code>HIDE</code> Layer is removed from Capabilities if user lacks access. (Secure) <code>CHALLENGE</code> Layer is visible; accessing it triggers a 401 Challenge. <code>MIXED</code> Layer is visible; data is filtered transparently. <pre><code>{\n  \"access\": \"LIMIT\",\n  \"layerDetails\": {\n    \"catalogMode\": \"HIDE\"\n  }\n}\n</code></pre>"},{"location":"admin_guide/installation/","title":"Installation Guide","text":"<p>This guide details how to deploy GeoServer ACL.</p>"},{"location":"admin_guide/installation/#deployment-options","title":"Deployment Options","text":"<ol> <li>Docker Compose (Recommended): The simplest way to run the ACL service alongside a database.</li> <li>GeoServer Cloud: ACL support is built-in; no separate installation required.</li> <li>Manual Installation: Run the JAR file directly on your infrastructure.</li> </ol>"},{"location":"admin_guide/installation/#method-1-docker-compose-recommended","title":"Method 1: Docker Compose (Recommended)","text":"<p>You do not need to build the application. We provide official Docker images.</p>"},{"location":"admin_guide/installation/#1-create-a-compose-file","title":"1. Create a Compose File","text":"<p>Create a file named <code>docker-compose.yml</code> with the following content:</p> <pre><code>volumes:\n  acl_data:\n\nservices:\n  acldb:\n    image: imresamu/postgis:15-3.4\n    environment:\n      - POSTGRES_DB=acl\n      - POSTGRES_USER=acl\n      - POSTGRES_PASSWORD=acls3cr3t\n    volumes:\n      - acl_data:/var/lib/postgresql/data\n    restart: always\n    ports:\n      - 6432:5432\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U acl\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    deploy:\n      resources:\n        limits:\n          cpus: '4.0'\n          memory: 2G\n\n  acl:\n    image: geoservercloud/geoserver-acl:latest\n    environment:\n      - PG_HOST=acldb\n      - PG_PORT=5432\n      - PG_DB=acl\n      - PG_SCHEMA=acl\n      - PG_USER=acl\n      - PG_PASSWORD=acls3cr3t\n    ports:\n      - 8080:8080\n    depends_on:\n      acldb:\n        condition: service_healthy\n        required: true\n</code></pre>"},{"location":"admin_guide/installation/#2-start-the-services","title":"2. Start the Services","text":"<p>Run the following command in the directory where you created the file:</p> <pre><code>docker compose up -d\n</code></pre>"},{"location":"admin_guide/installation/#3-connect-geoserver","title":"3. Connect GeoServer","text":"<p>Once the ACL service is running (accessible at <code>http://localhost:8080/acl</code>), configure your GeoServer instance to use it via the ACL Plugin.</p>"},{"location":"admin_guide/installation/#method-2-geoserver-cloud","title":"Method 2: GeoServer Cloud","text":"<p>If you are using GeoServer Cloud, ACL support is integrated out-of-the-box.</p> <p>To enable it, simply activate the <code>acl</code> Spring Boot profile for your services. No additional plugin installation is required.</p> <p>Refer to the GeoServer Cloud Documentation for detailed configuration instructions.</p>"},{"location":"admin_guide/installation/#method-3-manual-installation","title":"Method 3: Manual Installation","text":"<p>If you cannot use Docker, you can run the service manually.</p>"},{"location":"admin_guide/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Java: JRE 17 or higher.</li> <li>Database: PostgreSQL 15+ with PostGIS extension.</li> </ul>"},{"location":"admin_guide/installation/#1-prepare-the-database","title":"1. Prepare the Database","text":"<p>Create a PostgreSQL database and enable PostGIS:</p> <pre><code>CREATE USER acl WITH PASSWORD 'acl_password';\nCREATE DATABASE acldb OWNER acl;\n\\c acldb\nCREATE EXTENSION postgis;\n</code></pre>"},{"location":"admin_guide/installation/#2-download-artifacts","title":"2. Download Artifacts","text":"<p>Download the latest release artifacts from the GitHub Releases Page. You will need:</p> <ul> <li>ACL Service: <code>geoserver-acl-app-&lt;version&gt;.jar</code></li> <li>GeoServer Plugin: <code>geoserver-acl-plugin-&lt;version&gt;.zip</code></li> </ul>"},{"location":"admin_guide/installation/#3-run-the-acl-service","title":"3. Run the ACL Service","text":"<p>Create an <code>application.yml</code> file to configure the database connection:</p> <pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/acldb\n    username: acl\n    password: acl_password\n</code></pre> <p>Run the service:</p> <pre><code>java -jar geoserver-acl-app-&lt;version&gt;.jar --spring.config.location=file:./application.yml\n</code></pre>"},{"location":"admin_guide/installation/#4-install-the-geoserver-plugin","title":"4. Install the GeoServer Plugin","text":"<ol> <li>Stop your traditional GeoServer instance.</li> <li>Unzip the <code>geoserver-acl-plugin-&lt;version&gt;.zip</code> into <code>WEB-INF/lib</code>.</li> <li>Restart GeoServer.</li> <li>Navigate to Security &gt; GeoServer ACL in the GeoServer Web UI.</li> <li>Configure the ACL Service URL (e.g., <code>http://localhost:8080/acl</code>) and test the connection.</li> </ol>"},{"location":"admin_guide/installation/#production-considerations","title":"Production Considerations","text":"<p>For a production environment, ensure you address the following:</p> <ul> <li>Security: Do not use default passwords (<code>acl</code>/<code>acl</code>). Use a dedicated secret management system.</li> <li>High Availability: Run multiple instances of the ACL service behind a load balancer.</li> <li>Database: Use a managed PostgreSQL service (e.g., AWS RDS, Azure Database) with automated backups.</li> <li>Network: Restrict access to the ACL service API (port 8080/8180) to only trusted networks and the GeoServer instances.</li> </ul>"},{"location":"admin_guide/monitoring/","title":"Monitoring","text":"<p>This page explains how to monitor the GeoServer ACL service and plugin to ensure optimal performance, troubleshoot issues, and maintain security.</p>"},{"location":"admin_guide/monitoring/#monitoring-overview","title":"Monitoring Overview","text":"<p>Monitoring GeoServer ACL involves tracking several aspects:</p> <ol> <li>System Health: Ensuring all components are operational</li> <li>Performance Metrics: Tracking response times and throughput</li> <li>Access Logs: Recording authorization decisions and rule evaluations</li> <li>Error Tracking: Identifying and diagnosing issues</li> <li>Security Events: Monitoring for suspicious activities</li> </ol>"},{"location":"admin_guide/monitoring/#built-in-monitoring-tools","title":"Built-in Monitoring Tools","text":"<p>GeoServer ACL includes built-in monitoring capabilities through Spring Boot Actuator. For enhanced security and separation of concerns, actuator endpoints are exposed on a dedicated management port (typically <code>8081</code>) and do not inherit the <code>/acl</code> service context path.</p>"},{"location":"admin_guide/monitoring/#health-endpoints","title":"Health Endpoints","text":"<p>The health endpoint provides information on system status:</p> <pre><code>http://localhost:8081/actuator/health\n</code></pre> <p>Response example:</p> <pre><code>{\n  \"status\": \"UP\",\n  \"components\": {\n    \"db\": {\n      \"status\": \"UP\",\n      \"details\": {\n        \"database\": \"PostgreSQL\",\n        \"validationQuery\": \"isValid()\"\n      }\n    },\n    \"diskSpace\": {\n      \"status\": \"UP\",\n      \"details\": {\n        \"total\": 500107862016,\n        \"free\": 96612954112,\n        \"threshold\": 10485760\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"admin_guide/monitoring/#metrics-endpoint","title":"Metrics Endpoint","text":"<p>The metrics endpoint provides detailed performance metrics:</p> <pre><code>http://localhost:8081/actuator/metrics\n</code></pre> <p>To view specific metrics:</p> <pre><code>http://localhost:8081/actuator/metrics/http.server.requests\n</code></pre> <p>Response example:</p> <pre><code>{\n  \"name\": \"http.server.requests\",\n  \"measurements\": [\n    {\n      \"statistic\": \"COUNT\",\n      \"value\": 2385\n    },\n    {\n      \"statistic\": \"TOTAL_TIME\",\n      \"value\": 133.607534\n    },\n    {\n      \"statistic\": \"MAX\",\n      \"value\": 0.631959\n    }\n  ],\n  \"availableTags\": [\n    {\n      \"tag\": \"uri\",\n      \"values\": [\n        \"/acl/api/rules\",\n        \"/acl/api/authorization\",\n        \"/acl/api/adminrules\"\n      ]\n    },\n    {\n      \"tag\": \"status\",\n      \"values\": [\n        \"200\",\n        \"404\",\n        \"500\"\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"admin_guide/monitoring/#configuring-actuator","title":"Configuring Actuator","text":"<p>To enable additional actuator endpoints, configure <code>application.yml</code>:</p> <pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,loggers,httptrace\n  endpoint:\n    health:\n      show-details: always\n</code></pre>"},{"location":"admin_guide/monitoring/#logging-configuration","title":"Logging Configuration","text":"<p>Proper logging is essential for monitoring and troubleshooting.</p>"},{"location":"admin_guide/monitoring/#log-levels","title":"Log Levels","text":"<p>Configure log levels in <code>application.yml</code>:</p> <pre><code>logging:\n  level:\n    root: INFO\n    org.geoserver.acl: INFO\n    org.geoserver.acl.authorization: DEBUG\n    org.springframework: WARN\n</code></pre> <p>Common log levels: - ERROR: Only error events - WARN: Warning and error events - INFO: Informational events plus warnings and errors - DEBUG: Detailed information for debugging - TRACE: Most detailed information</p>"},{"location":"admin_guide/monitoring/#log-format","title":"Log Format","text":"<p>Configure the log format to include relevant information:</p> <pre><code>logging:\n  pattern:\n    console: \"%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n\"\n    file: \"%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n\"\n</code></pre>"},{"location":"admin_guide/monitoring/#log-files","title":"Log Files","text":"<p>Configure log file outputs:</p> <pre><code>logging:\n  file:\n    name: logs/acl.log\n    max-size: 10MB\n    max-history: 7\n</code></pre>"},{"location":"admin_guide/monitoring/#monitoring-performance","title":"Monitoring Performance","text":""},{"location":"admin_guide/monitoring/#performance-metrics","title":"Performance Metrics","text":"<ol> <li>Rule Evaluation Times: How long it takes to evaluate rules</li> <li>Database Query Performance: Response times for database operations</li> <li>API Response Times: Overall API endpoint performance</li> <li>Cache Hit Rates: Effectiveness of caching</li> <li>Memory Usage: JVM heap and non-heap memory</li> <li>Thread Pool Utilization: Thread usage and contention</li> </ol>"},{"location":"admin_guide/monitoring/#tracking-performance-metrics","title":"Tracking Performance Metrics","text":"<p>Using Actuator metrics:</p> <pre><code>http://localhost:8081/actuator/metrics/acl.rule.evaluation\nhttp://localhost:8081/actuator/metrics/http.server.requests\n</code></pre>"},{"location":"admin_guide/monitoring/#performance-optimization","title":"Performance Optimization","text":"<p>If monitoring reveals performance issues:</p> <ol> <li>Increase Cache Size: Configure larger caches for frequently accessed rules</li> <li>Optimize Database: Add indexes for common query patterns</li> <li>Tune JVM: Allocate appropriate memory and GC settings</li> <li>Optimize Rules: Reduce the number of rules or improve rule organization</li> <li>Horizontal Scaling: Deploy multiple instances behind a load balancer</li> </ol>"},{"location":"admin_guide/monitoring/#integration-with-external-monitoring-systems","title":"Integration with External Monitoring Systems","text":""},{"location":"admin_guide/monitoring/#prometheus-integration","title":"Prometheus Integration","text":"<p>Spring Boot applications can expose Prometheus metrics:</p> <pre><code>management:\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n  endpoints:\n    web:\n      exposure:\n        include: prometheus\n</code></pre> <p>Access Prometheus metrics at:</p> <pre><code>http://localhost:8081/actuator/prometheus\n</code></pre>"},{"location":"admin_guide/monitoring/#grafana-dashboards","title":"Grafana Dashboards","text":"<p>Create Grafana dashboards to visualize metrics from Prometheus:</p> <ol> <li>Add Prometheus as a data source in Grafana</li> <li>Import or create dashboards for:</li> <li>System health</li> <li>Request rates and latencies</li> <li>Error rates</li> <li>Memory usage</li> <li>Database connection pool</li> </ol>"},{"location":"admin_guide/monitoring/#elk-stack-integration","title":"ELK Stack Integration","text":"<p>For log analysis:</p> <ol> <li>Configure Filebeat to collect logs</li> <li>Send logs to Logstash for processing</li> <li>Store in Elasticsearch</li> <li>Visualize with Kibana</li> </ol>"},{"location":"admin_guide/monitoring/#alerting","title":"Alerting","text":"<p>Set up alerts to notify administrators of potential issues:</p>"},{"location":"admin_guide/monitoring/#health-checks","title":"Health Checks","text":"<p>Monitor the health endpoint and trigger alerts when status is not \"UP\":</p> <pre><code>curl -s http://localhost:8081/actuator/health | grep -q '\"status\":\"UP\"' || send_alert\n</code></pre>"},{"location":"admin_guide/monitoring/#performance-alerts","title":"Performance Alerts","text":"<p>Set thresholds for important metrics:</p> <ul> <li>Rule evaluation time &gt; 100ms</li> <li>API response time &gt; 500ms</li> <li>Error rate &gt; 1%</li> <li>Memory usage &gt; 80%</li> </ul>"},{"location":"admin_guide/monitoring/#log-based-alerts","title":"Log-based Alerts","text":"<p>Monitor logs for critical events:</p> <ul> <li>Authentication failures</li> <li>Authorization failures with unusual patterns</li> <li>Database connection issues</li> <li>Unexpected exceptions</li> </ul>"},{"location":"admin_guide/monitoring/#security-monitoring","title":"Security Monitoring","text":""},{"location":"admin_guide/monitoring/#authentication-monitoring","title":"Authentication Monitoring","text":"<p>Track authentication attempts:</p> <ul> <li>Failed login attempts</li> <li>Unusual login patterns</li> <li>Repeated authentication failures from the same source</li> </ul>"},{"location":"admin_guide/monitoring/#authorization-monitoring","title":"Authorization Monitoring","text":"<p>Monitor authorization decisions:</p> <ul> <li>Track denied access patterns</li> <li>Look for unusual rule evaluation patterns</li> <li>Monitor rule changes</li> </ul>"},{"location":"admin_guide/monitoring/#admin-actions-monitoring","title":"Admin Actions Monitoring","text":"<p>Track administrative actions:</p> <ul> <li>Rule additions, modifications, and deletions</li> <li>Admin rule changes</li> <li>Configuration changes</li> </ul>"},{"location":"admin_guide/monitoring/#audit-logging","title":"Audit Logging","text":"<p>Enable comprehensive audit logging for security and compliance:</p> <pre><code>geoserver:\n  acl:\n    audit:\n      enabled: true\n      log-level: INFO\n      include-request-details: true\n</code></pre>"},{"location":"admin_guide/monitoring/#troubleshooting-common-issues","title":"Troubleshooting Common Issues","text":""},{"location":"admin_guide/monitoring/#high-rule-evaluation-times","title":"High Rule Evaluation Times","text":"<p>If rule evaluation is slow:</p> <ol> <li>Check Rule Count: Too many rules can slow down evaluation</li> <li>Review Rule Organization: Ensure high-priority rules match frequently</li> <li>Examine Database Performance: Slow database queries might be the cause</li> <li>Enable Query Logging: Add SQL logging to identify slow queries</li> </ol>"},{"location":"admin_guide/monitoring/#memory-issues","title":"Memory Issues","text":"<p>For memory-related problems:</p> <ol> <li>Check Heap Usage: Monitor JVM heap usage</li> <li>Optimize Cache Settings: Adjust cache sizes</li> <li>Enable GC Logging: Add detailed garbage collection logging</li> <li>Tune JVM Settings: Adjust memory allocation and GC parameters</li> </ol>"},{"location":"admin_guide/monitoring/#connection-pool-exhaustion","title":"Connection Pool Exhaustion","text":"<p>If database connections are being exhausted:</p> <ol> <li>Increase Pool Size: Configure a larger connection pool</li> <li>Check Connection Leaks: Ensure connections are being closed</li> <li>Reduce Connection Holding Time: Optimize query execution</li> <li>Add Connection Timeout: Set appropriate timeouts</li> </ol>"},{"location":"admin_guide/monitoring/#monitoring-best-practices","title":"Monitoring Best Practices","text":"<ol> <li>Establish Baselines: Measure normal performance to detect anomalies</li> <li>Monitor Trends: Track metrics over time to identify gradual degradation</li> <li>Comprehensive Coverage: Monitor all components (service, database, plugin)</li> <li>Correlate Metrics: Connect performance metrics with user experience</li> <li>Regular Review: Periodically review monitoring data for improvements</li> <li>Test Alerting: Ensure alert mechanisms work as expected</li> <li>Document Procedures: Create runbooks for common issues</li> </ol>"},{"location":"admin_guide/monitoring/#additional-resources","title":"Additional Resources","text":"<ul> <li>Spring Boot Actuator Documentation</li> <li>Prometheus Documentation</li> <li>Grafana Documentation</li> </ul>"},{"location":"admin_guide/rest_api/","title":"REST API Usage","text":"<p>This page provides information about using the GeoServer ACL REST API for programmatic management of rules and automated integration.</p>"},{"location":"admin_guide/rest_api/#api-overview","title":"API Overview","text":"<p>The GeoServer ACL REST API provides comprehensive endpoints for managing:</p> <ul> <li>Data access rules</li> <li>Administrative access rules</li> <li>Authorization decisions</li> <li>System configuration</li> <li>Health and status information</li> </ul> <p>The API follows REST principles and uses JSON for data exchange.</p>"},{"location":"admin_guide/rest_api/#base-urls","title":"Base URLs","text":"<p>Depending on your deployment:</p> <ul> <li>Standalone: <code>http://localhost:8080/acl/api/</code></li> <li>Embedded: <code>http://localhost:8080/geoserver/acl/api/</code></li> <li>Docker: Depends on your Docker configuration (e.g., <code>http://localhost:8181/acl/api/</code>)</li> </ul>"},{"location":"admin_guide/rest_api/#authentication","title":"Authentication","text":"<p>The API requires authentication. The exact method depends on your configuration:</p>"},{"location":"admin_guide/rest_api/#basic-authentication","title":"Basic Authentication","text":"<pre><code>curl -u username:password http://localhost:8080/acl/api/rules\n</code></pre>"},{"location":"admin_guide/rest_api/#token-based-authentication","title":"Token-Based Authentication","text":"<pre><code>curl -H \"Authorization: Bearer your_token_here\" http://localhost:8080/acl/api/rules\n</code></pre>"},{"location":"admin_guide/rest_api/#api-documentation","title":"API Documentation","text":""},{"location":"admin_guide/rest_api/#openapiswagger","title":"OpenAPI/Swagger","text":"<p>The API is documented using OpenAPI. You can access the Swagger UI at:</p> <pre><code>http://localhost:8080/acl/swagger-ui.html\n</code></pre> <p>And the OpenAPI specification at:</p> <pre><code>http://localhost:8080/acl/api-docs\n</code></pre>"},{"location":"admin_guide/rest_api/#rules-management-api","title":"Rules Management API","text":""},{"location":"admin_guide/rest_api/#list-rules","title":"List Rules","text":"<p>Get all data access rules:</p> <pre><code>curl -u admin:geoserver http://localhost:8080/acl/api/rules\n</code></pre>"},{"location":"admin_guide/rest_api/#get-rule-by-id","title":"Get Rule by ID","text":"<p>Get a specific rule by its ID:</p> <pre><code>curl -u admin:geoserver http://localhost:8080/acl/api/rules/123\n</code></pre>"},{"location":"admin_guide/rest_api/#create-rule","title":"Create Rule","text":"<p>Create a new rule:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/rules \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"priority\": 100,\n    \"access\": \"ALLOW\",\n    \"username\": \"user1\",\n    \"workspace\": \"workspace1\",\n    \"layer\": \"layer1\",\n    \"service\": \"WMS\",\n    \"request\": \"GetMap\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#update-rule","title":"Update Rule","text":"<p>Update an existing rule:</p> <pre><code>curl -u admin:geoserver -X PUT \\\n  http://localhost:8080/acl/api/rules/123 \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"priority\": 100,\n    \"access\": \"ALLOW\",\n    \"username\": \"user1\",\n    \"workspace\": \"workspace1\",\n    \"layer\": \"layer1\",\n    \"service\": \"WMS\",\n    \"request\": \"GetMap\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#delete-rule","title":"Delete Rule","text":"<p>Delete a rule:</p> <pre><code>curl -u admin:geoserver -X DELETE \\\n  http://localhost:8080/acl/api/rules/123\n</code></pre>"},{"location":"admin_guide/rest_api/#find-rules","title":"Find Rules","text":"<p>Search for rules with specific criteria:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/rules/search \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"workspace\": \"workspace1\",\n    \"layer\": \"layer1\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#count-rules","title":"Count Rules","text":"<p>Count rules matching specific criteria:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/rules/count \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"workspace\": \"workspace1\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#bulk-importexport","title":"Bulk Import/Export","text":"<p>Export all rules:</p> <pre><code>curl -u admin:geoserver http://localhost:8080/acl/api/rules &gt; rules_backup.json\n</code></pre> <p>Import rules:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/rules/bulk \\\n  -H 'Content-Type: application/json' \\\n  -d @rules_backup.json\n</code></pre>"},{"location":"admin_guide/rest_api/#admin-rules-management-api","title":"Admin Rules Management API","text":""},{"location":"admin_guide/rest_api/#list-admin-rules","title":"List Admin Rules","text":"<p>Get all admin rules:</p> <pre><code>curl -u admin:geoserver http://localhost:8080/acl/api/adminrules\n</code></pre>"},{"location":"admin_guide/rest_api/#get-admin-rule-by-id","title":"Get Admin Rule by ID","text":"<p>Get a specific admin rule by its ID:</p> <pre><code>curl -u admin:geoserver http://localhost:8080/acl/api/adminrules/123\n</code></pre>"},{"location":"admin_guide/rest_api/#create-admin-rule","title":"Create Admin Rule","text":"<p>Create a new admin rule:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/adminrules \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"priority\": 100,\n    \"username\": \"workspace_admin\",\n    \"workspace\": \"workspace1\",\n    \"access\": \"ADMIN\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#update-admin-rule","title":"Update Admin Rule","text":"<p>Update an existing admin rule:</p> <pre><code>curl -u admin:geoserver -X PUT \\\n  http://localhost:8080/acl/api/adminrules/123 \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"priority\": 100,\n    \"username\": \"workspace_admin\",\n    \"workspace\": \"workspace1\",\n    \"access\": \"ADMIN\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#delete-admin-rule","title":"Delete Admin Rule","text":"<p>Delete an admin rule:</p> <pre><code>curl -u admin:geoserver -X DELETE \\\n  http://localhost:8080/acl/api/adminrules/123\n</code></pre>"},{"location":"admin_guide/rest_api/#find-admin-rules","title":"Find Admin Rules","text":"<p>Search for admin rules with specific criteria:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/adminrules/search \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"workspace\": \"workspace1\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#count-admin-rules","title":"Count Admin Rules","text":"<p>Count admin rules matching specific criteria:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/adminrules/count \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"workspace\": \"workspace1\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#bulk-importexport_1","title":"Bulk Import/Export","text":"<p>Export all admin rules:</p> <pre><code>curl -u admin:geoserver http://localhost:8080/acl/api/adminrules &gt; adminrules_backup.json\n</code></pre> <p>Import admin rules:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/adminrules/bulk \\\n  -H 'Content-Type: application/json' \\\n  -d @adminrules_backup.json\n</code></pre>"},{"location":"admin_guide/rest_api/#authorization-api","title":"Authorization API","text":"<p>The Authorization API can be used to test access permissions based on specific request properties.</p>"},{"location":"admin_guide/rest_api/#check-access","title":"Check Access","text":"<p>Check if a specific request would be authorized:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/authorization \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"user\": \"user1\",\n    \"roles\": [\"ROLE_USER\"],\n    \"workspace\": \"workspace1\",\n    \"layer\": \"layer1\",\n    \"service\": \"WMS\",\n    \"request\": \"GetMap\"\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#get-access-summary","title":"Get Access Summary","text":"<p>Get a summary of accessible workspaces and layers:</p> <pre><code>curl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/authorization/summary \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"user\": \"user1\",\n    \"roles\": [\"ROLE_USER\"]\n  }'\n</code></pre>"},{"location":"admin_guide/rest_api/#health-and-monitoring-api","title":"Health and Monitoring API","text":""},{"location":"admin_guide/rest_api/#health-check","title":"Health Check","text":"<p>Check the health of the ACL service:</p> <pre><code>curl http://localhost:8081/acl/actuator/health\n</code></pre>"},{"location":"admin_guide/rest_api/#metrics","title":"Metrics","text":"<p>Get system metrics:</p> <pre><code>curl http://localhost:8081/acl/actuator/metrics\n</code></pre>"},{"location":"admin_guide/rest_api/#implementing-api-clients","title":"Implementing API Clients","text":"<p>GeoServer ACL provides generated API clients for several languages. You can also create your own clients using the OpenAPI specification.</p>"},{"location":"admin_guide/rest_api/#java-client","title":"Java Client","text":"<p>Maven dependency:</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.geoserver.acl&lt;/groupId&gt;\n  &lt;artifactId&gt;geoserver-acl-api-client&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>Example usage:</p> <pre><code>import org.geoserver.acl.client.AclClient;\nimport org.geoserver.acl.client.AclClientAdaptor;\n\n// Create a client\nAclClient client = new AclClient(\"http://localhost:8080/acl\", \"admin\", \"geoserver\");\nAclClientAdaptor adaptor = new AclClientAdaptor(client);\n\n// Get rules\nList&lt;Rule&gt; rules = adaptor.getRules();\n</code></pre>"},{"location":"admin_guide/rest_api/#javascript-client","title":"JavaScript Client","text":"<p>Installation:</p> <pre><code>npm install geoserver-acl-client\n</code></pre> <p>Example usage:</p> <pre><code>import { AclApi } from 'geoserver-acl-client';\n\n// Create a client\nconst api = new AclApi({\n  basePath: 'http://localhost:8080/acl',\n  username: 'admin',\n  password: 'geoserver'\n});\n\n// Get rules\napi.getRules().then(rules =&gt; {\n  console.log(rules);\n});\n</code></pre>"},{"location":"admin_guide/rest_api/#python-client","title":"Python Client","text":"<p>Installation:</p> <pre><code>pip install geoserver-acl-client\n</code></pre> <p>Example usage:</p> <pre><code>from geoserver_acl_client import AclApi\n\n# Create a client\napi = AclApi(\n  base_url='http://localhost:8080/acl',\n  username='admin',\n  password='geoserver'\n)\n\n# Get rules\nrules = api.get_rules()\nprint(rules)\n</code></pre>"},{"location":"admin_guide/rest_api/#common-api-tasks","title":"Common API Tasks","text":""},{"location":"admin_guide/rest_api/#bulk-rule-management","title":"Bulk Rule Management","text":"<p>For large-scale rule management, use bulk operations:</p> <pre><code># Export rules\ncurl -u admin:geoserver http://localhost:8080/acl/api/rules &gt; rules.json\n\n# Modify the JSON file (e.g., with a script)\n# ...\n\n# Import modified rules\ncurl -u admin:geoserver -X POST \\\n  http://localhost:8080/acl/api/rules/bulk \\\n  -H 'Content-Type: application/json' \\\n  -d @rules.json\n</code></pre>"},{"location":"admin_guide/rest_api/#integration-with-automation-scripts","title":"Integration with Automation Scripts","text":"<p>Example bash script to create a set of rules:</p> <pre><code>#!/bin/bash\n\n# Base URL\nBASE_URL=\"http://localhost:8080/acl/api\"\nAUTH=\"admin:geoserver\"\n\n# Create a rule\ncreate_rule() {\n  local username=$1\n  local workspace=$2\n  local layer=$3\n  local priority=$4\n\n  curl -u $AUTH -X POST \\\n    $BASE_URL/rules \\\n    -H 'Content-Type: application/json' \\\n    -d '{\n      \"priority\": '\"$priority\"',\n      \"access\": \"ALLOW\",\n      \"username\": \"'\"$username\"'\",\n      \"workspace\": \"'\"$workspace\"'\",\n      \"layer\": \"'\"$layer\"'\"\n    }'\n}\n\n# Create rules\ncreate_rule \"user1\" \"workspace1\" \"layer1\" 100\ncreate_rule \"user1\" \"workspace1\" \"layer2\" 101\ncreate_rule \"user2\" \"workspace2\" \"layer1\" 200\n</code></pre>"},{"location":"admin_guide/rest_api/#error-handling","title":"Error Handling","text":"<p>The API returns standard HTTP status codes:</p> <ul> <li>200 OK: Successful operation</li> <li>201 Created: Resource created</li> <li>400 Bad Request: Invalid input</li> <li>401 Unauthorized: Authentication failed</li> <li>403 Forbidden: Permission denied</li> <li>404 Not Found: Resource not found</li> <li>409 Conflict: Resource conflict (e.g., duplicate rule)</li> <li>500 Server Error: Internal server error</li> </ul> <p>Error responses include a JSON body with details:</p> <pre><code>{\n  \"error\": \"Bad Request\",\n  \"message\": \"Invalid rule format\",\n  \"timestamp\": \"2023-09-20T10:15:30Z\",\n  \"path\": \"/acl/api/rules\"\n}\n</code></pre>"},{"location":"admin_guide/rest_api/#api-versioning","title":"API Versioning","text":"<p>The API uses versioning to maintain backward compatibility:</p> <ul> <li>V1 API: <code>/acl/api/v1/...</code> (if specified)</li> <li>Default (latest) API: <code>/acl/api/...</code></li> </ul>"},{"location":"admin_guide/rest_api/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Use pagination for large result sets</li> <li>Implement caching for frequent queries</li> <li>Consider bulk operations for mass updates</li> <li>Monitor API usage and response times</li> </ul>"},{"location":"admin_guide/rest_api/#security-best-practices","title":"Security Best Practices","text":"<ul> <li>Use HTTPS for all API communication</li> <li>Implement API rate limiting</li> <li>Audit API access</li> <li>Use role-based access control for API endpoints</li> <li>Regularly rotate API credentials</li> <li>Avoid storing credentials in scripts</li> </ul>"},{"location":"admin_guide/rule_management/","title":"Data Access Rules","text":"<p>Data Access Rules define the authorization policy for standard OGC service requests. This reference details the rule structure and management API.</p>"},{"location":"admin_guide/rule_management/#rule-specification","title":"Rule Specification","text":"<p>A Rule is a JSON object with the following schema:</p> Field Type Required Description <code>priority</code> Integer Yes Evaluation order (0 is highest priority). Unique per rule. <code>access</code> Enum Yes <code>ALLOW</code>, <code>DENY</code>, or <code>LIMIT</code>. <code>roleName</code> String No The role this rule applies to. (Use <code>*</code> for all roles). <code>userName</code> String No The specific user this rule applies to. (Use <code>*</code> for all users). <code>service</code> String No OGC Service (e.g., <code>WMS</code>, <code>WFS</code>). <code>*</code> matches all. <code>request</code> String No Service operation (e.g., <code>GetMap</code>). <code>*</code> matches all. <code>workspace</code> String No GeoServer workspace name. <code>*</code> matches all. <code>layer</code> String No Layer name. <code>*</code> matches all. <code>addressRange</code> CIDR No IP address range (e.g., <code>192.168.1.0/24</code>). <code>ruleLimits</code> Object No Spatial restrictions (see below). <code>layerDetails</code> Object No Attribute/Catalog restrictions (see below). <p>Note: At least one of <code>roleName</code> or <code>userName</code> must be specified. Use <code>*</code> to match everyone.</p>"},{"location":"admin_guide/rule_management/#rule-evaluation-logic","title":"Rule Evaluation Logic","text":"<ol> <li>Filter: The engine selects all rules where the request parameters match the rule definition (e.g., matching user, workspace, service).</li> <li>Sort: Matching rules are sorted by <code>priority</code> (ascending).</li> <li>Apply: The first matching rule determines the outcome.</li> <li>Default: If no rule matches, the global default (usually <code>DENY</code>) applies.</li> </ol>"},{"location":"admin_guide/rule_management/#json-examples","title":"JSON Examples","text":""},{"location":"admin_guide/rule_management/#1-public-read-only-access","title":"1. Public Read-Only Access","text":"<p>Allows anonymous access (<code>*</code>) to view maps (<code>WMS</code>) but denies data download (<code>WFS</code>).</p> <pre><code>[\n  {\n    \"priority\": 1000,\n    \"access\": \"ALLOW\",\n    \"roleName\": \"*\",\n    \"workspace\": \"public\",\n    \"service\": \"WMS\"\n  },\n  {\n    \"priority\": 1001,\n    \"access\": \"DENY\",\n    \"roleName\": \"*\",\n    \"workspace\": \"public\",\n    \"service\": \"WFS\"\n  }\n]\n</code></pre>"},{"location":"admin_guide/rule_management/#2-spatially-restricted-user","title":"2. Spatially Restricted User","text":"<p>Restricts a specific user to a polygon area.</p> <pre><code>{\n  \"priority\": 100,\n  \"access\": \"LIMIT\",\n  \"userName\": \"contractor_1\",\n  \"workspace\": \"project_a\",\n  \"layer\": \"site_boundary\",\n  \"ruleLimits\": {\n    \"allowedArea\": \"POLYGON((...))\",\n    \"spatialFilterType\": \"INTERSECT\"\n  }\n}\n</code></pre>"},{"location":"admin_guide/rule_management/#3-attribute-masking","title":"3. Attribute Masking","text":"<p>Hides sensitive columns from a layer.</p> <pre><code>{\n  \"priority\": 50,\n  \"access\": \"LIMIT\",\n  \"roleName\": \"ROLE_INTERNAL\",\n  \"workspace\": \"hr\",\n  \"layer\": \"employees\",\n  \"layerDetails\": {\n    \"attributes\": {\n      \"excludedAttributes\": [\"salary\", \"ssn\"],\n      \"accessType\": \"READONLY\"\n    }\n  }\n}\n</code></pre>"},{"location":"admin_guide/rule_management/#management-api","title":"Management API","text":"<p>Rules are managed via the REST API at <code>/api/rules</code>.</p> <ul> <li>GET /api/rules: List all rules (supports pagination).</li> <li>POST /api/rules: Create a new rule.</li> <li>PUT /api/rules/{id}: Update an existing rule.</li> <li>DELETE /api/rules/{id}: Delete a rule.</li> </ul>"},{"location":"admin_guide/rule_management/#bulk-operations","title":"Bulk Operations","text":"<p>For migration or backup/restore:</p> <ul> <li>POST /api/rules/batch: Accepts a JSON array of rule objects.</li> </ul>"},{"location":"admin_guide/rule_management/#priority-strategy","title":"Priority Strategy","text":"<p>To maintain a manageable rule set:</p> <ol> <li>Reserve Ranges: Use ranges for different scopes (e.g., 0-99 for User Overrides, 100-999 for Layer Rules, 1000+ for Global Defaults).</li> <li>Deny First: Place high-priority specific DENY rules (e.g., \"Deny restricted_layer to everyone\") before broad ALLOW rules.</li> <li>Gaps: Leave priority gaps (e.g., increment by 10) to allow inserting rules later without re-indexing.</li> </ol>"},{"location":"api/","title":"Index","text":""},{"location":"community/","title":"Community","text":"<p>Welcome to the GeoServer ACL community! We're glad you're here.</p> <p>GeoServer Cloud is an open-source project that thrives on community collaboration. Whether you're a developer, user, tester, designer, or advocate, there's a place for you here.</p>"},{"location":"community/#get-involved","title":"Get Involved","text":"<p>There are many ways to contribute to GeoServer ACL:</p> <ul> <li>Report bugs and request features through GitHub Issues</li> <li>Contribute code by submitting pull requests</li> <li>Improve documentation to help others understand and use GeoServer Cloud</li> <li>Answer questions and help other users</li> <li>Test new features and provide feedback</li> <li>Share your experience through blog posts, talks, or social media</li> <li>Support the project financially or through business partnerships</li> </ul>"},{"location":"community/#community-resources","title":"Community Resources","text":""},{"location":"community/#contributors","title":"Contributors","text":"<p>See our amazing contributors who make this project possible. We recognize all types of contributions, not just code!</p>"},{"location":"community/#contributing-guide","title":"Contributing Guide","text":"<p>Learn how to contribute to GeoServer Cloud, including:</p> <ul> <li>Pull request workflow</li> <li>Commit guidelines</li> <li>Code contribution license agreement</li> <li>Development setup</li> </ul>"},{"location":"community/#code-of-conduct","title":"Code of Conduct","text":"<p>Our community pledge and standards for inclusive, welcoming participation.</p>"},{"location":"community/#communication","title":"Communication","text":"<ul> <li>GitHub Discussions: Ask questions, share ideas, and discuss the project</li> <li>GitHub Issues: Report bugs and request features</li> <li>Pull Requests: Contribute code and documentation</li> </ul>"},{"location":"community/#recognition","title":"Recognition","text":"<p>We believe that all contributions are valuable. That's why we use the All Contributors specification to recognize everyone who contributes to the project, regardless of the type of contribution.</p> <p>Visit our Contributors page to see everyone who has helped make GeoServer Cloud better!</p>"},{"location":"community/#support","title":"Support","text":"<p>If you need help:</p> <ol> <li>Check the documentation for guides and references</li> <li>Search existing issues to see if your question has been answered</li> <li>Open a new issue if you've found a bug or have a feature request</li> <li>Reach out to the community through GitHub Discussions</li> </ol> <p>Thank you for being part of the GeoServer ACL community!</p>"},{"location":"community/contributors/","title":"Contributors","text":"<p>This project follows the All Contributors specification. We recognize contributions of all kinds - not just code!</p>"},{"location":"community/contributors/#our-amazing-contributors","title":"Our Amazing Contributors","text":"<p>Thanks goes to these wonderful people (emoji key):</p> <sub>Andrea Borghi</sub>\ud83d\ude87 \ud83d\udc1b \u26a0\ufe0f \ud83d\udcbb \ud83d\udce2 \ud83d\udcd3 <sub>Camila Roldan</sub>\ud83c\udfa8 <sub>C\u00e9cile Vuilleumier</sub>\ud83d\udcbb \ud83d\udc1b \u26a0\ufe0f \ud83d\ude87 \ud83d\udc40 <sub>Emmanuel Belo</sub>\ud83d\udd0d \ud83d\udce3 \ud83d\udcbc <sub>Florent Gravin</sub>\ud83d\udcbc \ud83e\udd14 \ud83d\udce3 \ud83d\udd0d <sub>Gabriel Roldan</sub>\ud83d\udcbb \ud83d\udcd6 \ud83d\ude87 \ud83c\udfa8 \ud83e\udd14 \ud83d\udea7 \ud83d\udd2c \ud83d\udce2 <sub>Jose Macchi</sub>\ud83d\udc1b \u26a0\ufe0f \ud83d\ude87 \ud83d\udc40"},{"location":"community/contributors/#how-to-get-recognized","title":"How to Get Recognized","text":"<p>We use the All Contributors bot to recognize contributors. There are two ways to be added:</p>"},{"location":"community/contributors/#for-code-github-activity","title":"For Code &amp; GitHub Activity","text":"<p>If you've contributed through GitHub (code, issues, reviews, etc.), you can request to be added:</p> <ol> <li>Comment on any issue or PR: <code>@all-contributors please add @username for &lt;contribution-type&gt;</code></li> <li>The bot will create a PR adding you to the list</li> <li>Once merged, you'll appear on this page!</li> </ol> <p>Contribution types include:</p> Type Emoji Description code \ud83d\udcbb Code contributions doc \ud83d\udcd6 Documentation bug \ud83d\udc1b Bug reports test \u26a0\ufe0f Tests infra \ud83d\ude87 Infrastructure (CI/CD, build tools, etc.) design \ud83c\udfa8 Design work ideas \ud83e\udd14 Ideas &amp; Planning review \ud83d\udc40 Code reviews question \ud83d\udcac Answering questions maintenance \ud83d\udea7 Maintenance example \ud83d\udca1 Examples tutorial \u2705 Tutorials translation \ud83c\udf0d Translation talk \ud83d\udce2 Talks &amp; presentations video \ud83d\udcf9 Videos plugin \ud83d\udd0c Plugin development userTesting \ud83d\udcd3 User testing content \ud83d\udd8b Content creation eventOrganizing \ud83d\udccb Event organizing mentoring \ud83e\uddd1\u200d\ud83c\udfeb Mentoring research \ud83d\udd2c Research business \ud83d\udcbc Business development financial \ud83d\udcb5 Financial support projectManagement \ud83d\udcc6 Project management promotion \ud83d\udce3 Promoting the project security \ud83d\udee1\ufe0f Security work fundingFinding \ud83d\udd0d Funding finding <p>See the complete list at allcontributors.org/emoji-key.</p>"},{"location":"community/contributors/#manual-addition","title":"Manual Addition","text":"<p>Some contributions (like business development, financial support, or project management) may not show up in GitHub activity. For these contributions, contact the maintainers to be manually added to the <code>.all-contributorsrc</code> file.</p>"},{"location":"community/contributors/#why-all-contributors","title":"Why All Contributors?","text":"<p>We believe that all contributions matter. Whether you:</p> <ul> <li>Fixed a typo in the docs</li> <li>Reported a critical bug</li> <li>Answered a question on GitHub</li> <li>Gave a talk about GeoServer ACL</li> <li>Provided financial support</li> <li>Managed project priorities</li> <li>Or anything else that helped the project</li> </ul> <p>You deserve recognition! \ud83c\udf89</p> <p>This page celebrates everyone who has helped make GeoServer ACL better. Thank you!</p> <p>This project follows the All Contributors specification. Contributions of any kind are welcome!</p>"},{"location":"developer_guide/","title":"Developer Guide","text":"<p>This guide is intended for developers who want to integrate with, extend, or contribute to GeoServer ACL. It covers the architecture, API, and development workflow.</p>"},{"location":"developer_guide/#architecture-overview","title":"Architecture Overview","text":"<p>GeoServer ACL follows a modular architecture with a clean separation of concerns:</p> <ol> <li>Domain Layer: Contains the core business logic and domain model</li> <li>Application Layer: Implements use cases and coordinates the domain objects</li> <li>Integration Layer: Connects to external systems and provides persistence</li> <li>API Layer: Exposes functionality through REST endpoints</li> <li>Plugin Layer: Integrates with GeoServer</li> </ol> <p>For a detailed architecture description, see the Architecture section.</p>"},{"location":"developer_guide/#core-components","title":"Core Components","text":"<p>The main components of GeoServer ACL are:</p> <ul> <li>Rule Management: Core domain logic for managing data access rules</li> <li>Admin Rule Management: Domain logic for managing administrative permissions</li> <li>Authorization Service: Logic for evaluating access requests against rules</li> <li>REST API: Interface for programmatic access to rules and authorization</li> <li>GeoServer Plugin: Integration with GeoServer for enforcing access control</li> </ul>"},{"location":"developer_guide/#integration-options","title":"Integration Options","text":"<p>Developers can integrate with GeoServer ACL in several ways:</p> <ol> <li>REST API: Direct HTTP calls to the GeoServer ACL service</li> <li>Java Client: Use the provided Java client library</li> <li>JavaScript Client: Use the generated JavaScript client</li> <li>Python Client: Use the generated Python client</li> <li>Custom Client: Generate a client for your language using the OpenAPI specification</li> </ol>"},{"location":"developer_guide/#development-setup","title":"Development Setup","text":"<p>To set up a development environment for GeoServer ACL:</p> <ol> <li>Java 17 JDK is required for building</li> <li>Clone the repository: <code>git clone https://github.com/geoserver/geoserver-acl.git</code></li> <li>Build with Maven: <code>./mvnw clean install</code></li> </ol> <p>For more detailed instructions, see Building from Source.</p>"},{"location":"developer_guide/#api-integration","title":"API Integration","text":"<p>The GeoServer ACL API follows OpenAPI 3.0 standards:</p> <ul> <li>API Documentation: Available at <code>/api-docs</code> when the service is running</li> <li>Swagger UI: Interactive documentation at <code>/swagger-ui.html</code></li> <li>Generated Clients: Available in Java, JavaScript, and Python</li> </ul> <p>For detailed API usage, see API Integration.</p>"},{"location":"developer_guide/#contributing","title":"Contributing","text":"<p>Contributions to GeoServer ACL are welcome! The project follows standard open source practices:</p> <ol> <li>Fork the repository</li> <li>Create a feature branch</li> <li>Make your changes</li> <li>Submit a pull request</li> </ol> <p>For detailed contributing guidelines, see Contributing.</p>"},{"location":"developer_guide/api_integration/","title":"API Reference","text":"<p>The GeoServer ACL Service exposes a RESTful API for rule management and authorization.</p> <p>Base URL: <code>http://&lt;host&gt;:8080/acl</code> OpenAPI Spec: <code>/api-docs</code> Swagger UI: <code>/swagger-ui.html</code></p>"},{"location":"developer_guide/api_integration/#authentication","title":"Authentication","text":"<p>The API supports two primary authentication modes:</p>"},{"location":"developer_guide/api_integration/#1-basic-authentication","title":"1. Basic Authentication","text":"<p>Standard HTTP Basic Auth using the configured admin credentials.</p> <pre><code>Authorization: Basic YWRtaW46Z2Vvc2VydmVy\n</code></pre>"},{"location":"developer_guide/api_integration/#2-pre-authentication-headers","title":"2. Pre-Authentication (Headers)","text":"<p>When running behind a trusted gateway (e.g., OAuth2 Proxy), the service trusts identity headers.</p> <ul> <li><code>X-Forwarded-User</code>: The username.</li> <li><code>X-Forwarded-Roles</code>: Comma-separated list of roles.</li> </ul>"},{"location":"developer_guide/api_integration/#core-endpoints","title":"Core Endpoints","text":""},{"location":"developer_guide/api_integration/#1-rule-management-apirules","title":"1. Rule Management (<code>/api/rules</code>)","text":""},{"location":"developer_guide/api_integration/#create-rule","title":"Create Rule","text":"<p>POST <code>/api/rules</code></p> <pre><code>{\n  \"priority\": 100,\n  \"access\": \"ALLOW\",\n  \"userName\": \"jsmith\",\n  \"workspace\": \"public\",\n  \"layer\": \"roads\",\n  \"service\": \"WMS\"\n}\n</code></pre>"},{"location":"developer_guide/api_integration/#list-rules","title":"List Rules","text":"<p>GET <code>/api/rules</code></p> <ul> <li>Query Params: <code>page</code>, <code>size</code>, <code>sort</code></li> </ul>"},{"location":"developer_guide/api_integration/#delete-rule","title":"Delete Rule","text":"<p>DELETE <code>/api/rules/{id}</code></p>"},{"location":"developer_guide/api_integration/#2-admin-rule-management-apiadminrules","title":"2. Admin Rule Management (<code>/api/adminrules</code>)","text":""},{"location":"developer_guide/api_integration/#grant-workspace-admin","title":"Grant Workspace Admin","text":"<p>POST <code>/api/adminrules</code></p> <pre><code>{\n  \"priority\": 50,\n  \"access\": \"ADMIN\",\n  \"userName\": \"city_manager\",\n  \"workspace\": \"city_data\"\n}\n</code></pre>"},{"location":"developer_guide/api_integration/#3-authorization-check-apiauthorization","title":"3. Authorization Check (<code>/api/authorization</code>)","text":"<p>Test if a user has access to a resource.</p> <p>POST <code>/api/authorization</code></p> <pre><code>{\n  \"user\": \"jsmith\",\n  \"roles\": [\"ROLE_USER\"],\n  \"workspace\": \"public\",\n  \"layer\": \"roads\",\n  \"service\": \"WMS\",\n  \"request\": \"GetMap\"\n}\n</code></pre> <p>Response: <pre><code>{\n  \"grant\": true,\n  \"ruleLimits\": null,\n  \"layerDetails\": null\n}\n</code></pre></p>"},{"location":"developer_guide/api_integration/#batch-operations","title":"Batch Operations","text":"<p>For bulk migration or backup/restore.</p>"},{"location":"developer_guide/api_integration/#import-rules","title":"Import Rules","text":"<p>POST <code>/api/rules/batch</code></p> <p>Accepts a JSON array of Rule objects.</p> <pre><code>[\n  { \"priority\": 10, \"access\": \"DENY\", \"workspace\": \"secure\" },\n  { \"priority\": 20, \"access\": \"ALLOW\", \"workspace\": \"public\" }\n]\n</code></pre>"},{"location":"developer_guide/architecture/","title":"Architecture","text":"<p>GeoServer ACL implements a Hexagonal Architecture (Ports and Adapters) to isolate core domain logic from infrastructure concerns like GeoServer internals, database persistence, and REST APIs.</p>"},{"location":"developer_guide/architecture/#system-context","title":"System Context","text":"<p>The system operates as two distinct deployment artifacts sharing a common domain kernel:</p> <ol> <li>ACL Service: A standalone Spring Boot application handling rule management and administration.</li> <li>GeoServer Plugin: An embedded interceptor running within the GeoServer process to enforce decisions.</li> </ol> <p></p>"},{"location":"developer_guide/architecture/#module-structure","title":"Module Structure","text":"<p>The codebase is organized to enforce architectural boundaries:</p> <ul> <li><code>domain</code>: The pure Java core. Contains business rules, entities, and Port interfaces. Zero dependencies on frameworks (Spring, Hibernate, GeoServer).</li> <li><code>application</code>: Orchestrates use cases by calling Domain services. Implements the Application boundary.</li> <li><code>infrastructure</code> (Integration):<ul> <li><code>persistence</code>: Implements Domain Repository ports using Spring Data JPA / Hibernate / PostGIS.</li> <li><code>web-api</code>: Implements the REST API Adapter.</li> </ul> </li> <li><code>geoserver-plugin</code>: The Driving Adapter that translates GeoServer internal events into ACL Domain requests.</li> </ul>"},{"location":"developer_guide/architecture/#core-domain-models","title":"Core Domain Models","text":"<p>The Domain Layer defines the language of the system.</p>"},{"location":"developer_guide/architecture/#rule","title":"Rule","text":"<p>The aggregate root for access control.</p> <pre><code>public class Rule {\n    private RuleIdentifier id;\n    private int priority;\n    private AccessType access; // ALLOW, DENY, LIMIT\n    private String workspace;\n    private String layer;\n    private RuleLimits limits; // Spatial/CQL constraints\n    // ... validation logic\n}\n</code></pre>"},{"location":"developer_guide/architecture/#authorization-service","title":"Authorization Service","text":"<p>The primary Inbound Port for making decisions.</p> <pre><code>public interface AuthorizationService {\n    /**\n     * Evaluates a request against the active rule set.\n     */\n    AccessInfo authorize(AccessRequest request);\n}\n</code></pre>"},{"location":"developer_guide/architecture/#authorization-flow","title":"Authorization Flow","text":"<ol> <li>Interception: The GeoServer Plugin intercepts an OWS request (e.g., <code>GetMap</code>).</li> <li>Normalization: The plugin converts the GeoServer-specific request object into a domain <code>AccessRequest</code>.</li> <li>Delegation: The <code>AccessRequest</code> is passed to the <code>AuthorizationService</code>.</li> <li>Evaluation: The service queries the <code>RuleRepository</code> for matching rules.</li> <li>Resolution: Rules are sorted by priority; the first match dictates the <code>AccessInfo</code> result.</li> <li>Enforcement: The plugin translates <code>AccessInfo</code> back into GeoServer constructs (e.g., adding a CQL filter to the query).</li> </ol> <pre><code>sequenceDiagram\n    participant User as User/Client\n    participant GS as GeoServer Core\n    participant Plugin as ACL Plugin\n    participant Service as ACL Service\n    participant Database as Rule DB\n\n    User-&gt;&gt;GS: OWS Request (WMS/WFS)\n    GS-&gt;&gt;Plugin: checkAccess(User, Resource)\n    Note right of GS: ResourceAccessManager API\n\n    Plugin-&gt;&gt;Plugin: Build AccessRequest\n    Plugin-&gt;&gt;Service: POST /api/authorization\n\n    Service-&gt;&gt;Database: Fetch Matching Rules\n    Database--&gt;&gt;Service: Rules List\n\n    Service-&gt;&gt;Service: Evaluate Rules (Priority)\n    Service--&gt;&gt;Plugin: Return AccessInfo\n    Note right of Service: Grant/Deny, Spatial Limits, Attributes\n\n    Plugin-&gt;&gt;Plugin: Convert to DataAccessLimits\n    Plugin--&gt;&gt;GS: Return AccessLimits\n\n    alt Access Denied\n        GS--&gt;&gt;User: 403 Forbidden\n    else Access Granted\n        GS-&gt;&gt;GS: Apply Filters (CQL, Spatial)\n        GS--&gt;&gt;User: Filtered Response\n    end</code></pre>"},{"location":"developer_guide/architecture/#caching-strategy","title":"Caching Strategy","text":"<p>Performance is critical for per-request authorization.</p> <ol> <li>Decision Cache (Caffeine): The <code>AuthorizationService</code> caches the computed <code>AccessInfo</code> for identical <code>AccessRequest</code> objects.</li> <li>Invalidation: Modification events (Rule create/update) are published via Spring Cloud Bus to invalidate caches across distributed instances.</li> </ol>"},{"location":"developer_guide/architecture/#extension-points","title":"Extension Points","text":"<p>Developers can customize behavior by implementing specific Ports:</p> <ul> <li><code>AuthenticationProvider</code>: Default implementation uses Spring Security. Custom adapters can be written for proprietary identity providers.</li> <li><code>RuleRepository</code>: While PostGIS is the default, the interface allows swapping the storage backend (e.g., to an LDAP directory or external policy engine).</li> </ul>"},{"location":"developer_guide/building/","title":"Build Instructions","text":"<p>GeoServer ACL uses Maven for dependency management and Make for standardized build workflows.</p>"},{"location":"developer_guide/building/#tools-required","title":"Tools Required","text":"<ul> <li>JDK 17+</li> <li>Maven 3.9+</li> <li>Docker (for integration tests and container builds)</li> </ul>"},{"location":"developer_guide/building/#quick-start-makefile","title":"Quick Start (Makefile)","text":"<p>The project includes a <code>Makefile</code> to simplify common operations.</p> Command Description <code>make install</code> Full build (clean, install, test). <code>make build-image</code> Builds the ACL Service Docker image. <code>make test</code> Runs unit and integration tests. <code>make format</code> Applies code formatting (Palantir Java Format). <code>make clean</code> Cleans target directories."},{"location":"developer_guide/building/#maven-commands","title":"Maven Commands","text":"<p>If you prefer using Maven directly or need to pass specific flags:</p>"},{"location":"developer_guide/building/#full-build","title":"Full Build","text":"<pre><code>./mvnw clean install\n</code></pre>"},{"location":"developer_guide/building/#skip-tests","title":"Skip Tests","text":"<pre><code>./mvnw clean install -DskipTests\n</code></pre>"},{"location":"developer_guide/building/#build-geoserver-plugin-only","title":"Build GeoServer Plugin Only","text":"<p>The plugin must be built against Java 11 source compatibility. <pre><code>./mvnw clean install -pl src/plugin -Pgs-plugin\n</code></pre></p>"},{"location":"developer_guide/building/#build-docker-image","title":"Build Docker Image","text":"<pre><code>./mvnw clean package -pl src/application/authorization-app -Pdocker -DskipTests\n</code></pre>"},{"location":"developer_guide/building/#release-process","title":"Release Process","text":"<p>Releases are automated via GitHub Actions, but can be performed locally if necessary:</p> <ol> <li>Version Bump:     <pre><code>./mvnw versions:set -DnewVersion=1.0.0\n./mvnw versions:commit\n</code></pre></li> <li>Verify Build:     <pre><code>make install\n</code></pre></li> <li>Tag &amp; Push:     <pre><code>git commit -am \"Release 1.0.0\"\ngit tag v1.0.0\ngit push origin v1.0.0\n</code></pre></li> </ol>"},{"location":"developer_guide/contributing/","title":"Contributing","text":"<p>Please refer to the main CONTRIBUTING.md file for guidelines on how to contribute to GeoServer ACL.</p>"},{"location":"developer_guide/plugin_development/","title":"Plugin Development","text":"<p>This page explains how to develop and extend the GeoServer ACL plugin for GeoServer. It covers the plugin architecture, extension points, and development workflow.</p>"},{"location":"developer_guide/plugin_development/#plugin-architecture","title":"Plugin Architecture","text":"<p>The GeoServer ACL plugin integrates with GeoServer's authorization system to enforce access control rules. The plugin consists of several components:</p>"},{"location":"developer_guide/plugin_development/#core-components","title":"Core Components","text":"<ol> <li>ACLResourceAccessManager: Implements GeoServer's ResourceAccessManager interface to enforce access control</li> <li>ACLDispatcherCallback: Intercepts OGC service requests for authorization</li> <li>AccessRequestBuilder: Converts GeoServer requests to ACL AccessRequest objects</li> <li>ACL Configuration: Manages plugin configuration and connection to the ACL service</li> </ol>"},{"location":"developer_guide/plugin_development/#extension-points","title":"Extension Points","text":"<p>The plugin provides several extension points for customization:</p> <ol> <li>AccessRequestUserResolver: Resolves user information for access requests</li> <li>CatalogSecurityFilterBuilder: Builds CatalogFilters for filtering catalog resources</li> <li>ContainerLimitResolver: Resolves container-based limitations</li> <li>Custom Rule Types: Support for extended rule types</li> </ol>"},{"location":"developer_guide/plugin_development/#development-environment-setup","title":"Development Environment Setup","text":""},{"location":"developer_guide/plugin_development/#prerequisites","title":"Prerequisites","text":"<ul> <li>Java 17</li> <li>Maven 3.8+</li> <li>GeoServer 2.19+ source code</li> <li>IDE (IntelliJ IDEA or Eclipse)</li> </ul>"},{"location":"developer_guide/plugin_development/#setting-up-the-development-environment","title":"Setting Up the Development Environment","text":"<ol> <li> <p>Clone the GeoServer ACL repository:    <pre><code>git clone https://github.com/geoserver/geoserver-acl.git\ncd geoserver-acl\n</code></pre></p> </li> <li> <p>Build the project:    <pre><code>./mvnw clean install\n</code></pre></p> </li> <li> <p>Set up GeoServer for development:    <pre><code># Clone GeoServer repository\ngit clone https://github.com/geoserver/geoserver.git\ncd geoserver\n\n# Build GeoServer\nmvn clean install -DskipTests\n</code></pre></p> </li> <li> <p>Set up the plugin module for development:    <pre><code>cd geoserver-acl/src/plugin\nmvn eclipse:eclipse  # For Eclipse\n# or\nmvn idea:idea        # For IntelliJ IDEA\n</code></pre></p> </li> </ol>"},{"location":"developer_guide/plugin_development/#plugin-structure","title":"Plugin Structure","text":"<p>The plugin is organized into several modules:</p> <pre><code>src/plugin/\n\u251c\u2500\u2500 accessmanager/     # Core access management components\n\u251c\u2500\u2500 client/            # Client for communicating with the ACL service\n\u251c\u2500\u2500 config/            # Configuration components\n\u251c\u2500\u2500 plugin/            # Plugin assembly and Spring integration\n\u2514\u2500\u2500 web/               # Web UI components\n</code></pre>"},{"location":"developer_guide/plugin_development/#accessmanager-module","title":"accessmanager Module","text":"<p>This module contains the core access management implementation:</p> <ul> <li>ACLResourceAccessManager: Implements ResourceAccessManager for access control</li> <li>AccessRequestBuilder: Builds AccessRequest objects from GeoServer requests</li> <li>CatalogSecurityFilterBuilder: Creates catalog filters based on access rules</li> </ul>"},{"location":"developer_guide/plugin_development/#client-module","title":"client Module","text":"<p>This module provides the client for communicating with the ACL service:</p> <ul> <li>AclClient: Low-level client for the ACL API</li> <li>AclClientAdaptor: High-level client for easier integration</li> </ul>"},{"location":"developer_guide/plugin_development/#config-module","title":"config Module","text":"<p>This module manages plugin configuration:</p> <ul> <li>AccessManagerConfig: Configuration properties</li> <li>AccessManagerConfigProvider: Provider for configuration</li> </ul>"},{"location":"developer_guide/plugin_development/#plugin-module","title":"plugin Module","text":"<p>This module assembles the plugin and provides Spring integration:</p> <ul> <li>Spring Configuration: Spring context configuration</li> <li>Auto-configuration: Automatic plugin setup</li> </ul>"},{"location":"developer_guide/plugin_development/#web-module","title":"web Module","text":"<p>This module provides the web UI components:</p> <ul> <li>ACL UI Panel: Web UI for managing rules</li> <li>ACL Admin Page: Admin page for configuration</li> </ul>"},{"location":"developer_guide/plugin_development/#extending-the-plugin","title":"Extending the Plugin","text":""},{"location":"developer_guide/plugin_development/#creating-a-custom-user-resolver","title":"Creating a Custom User Resolver","text":"<p>The default user resolver extracts user information from GeoServer's Authentication object. You can create a custom implementation:</p> <pre><code>import org.geoserver.acl.plugin.accessmanager.AccessRequestUserResolver;\nimport org.geoserver.security.impl.GeoServerUser;\nimport org.springframework.security.core.Authentication;\n\npublic class CustomUserResolver implements AccessRequestUserResolver {\n    @Override\n    public String resolveUserName(Authentication authentication) {\n        // Your custom logic to extract username\n        return authentication.getName();\n    }\n\n    @Override\n    public Set&lt;String&gt; resolveRoles(Authentication authentication) {\n        // Your custom logic to extract roles\n        Set&lt;String&gt; roles = new HashSet&lt;&gt;();\n        authentication.getAuthorities().forEach(a -&gt; roles.add(a.getAuthority()));\n        return roles;\n    }\n}\n</code></pre> <p>Then register your custom resolver in the Spring context:</p> <pre><code>&lt;bean id=\"aclAccessRequestUserResolver\" \n      class=\"com.example.CustomUserResolver\"/&gt;\n</code></pre>"},{"location":"developer_guide/plugin_development/#creating-a-custom-catalog-filter-builder","title":"Creating a Custom Catalog Filter Builder","text":"<p>You can extend the catalog filtering behavior:</p> <pre><code>import org.geoserver.acl.plugin.accessmanager.CatalogSecurityFilterBuilder;\nimport org.geoserver.catalog.Catalog;\nimport org.geoserver.catalog.LayerInfo;\nimport org.geoserver.catalog.WorkspaceInfo;\n\npublic class CustomCatalogFilterBuilder implements CatalogSecurityFilterBuilder {\n    @Override\n    public CatalogFilter createFilter(Catalog catalog, AccessInfo accessInfo) {\n        // Create a custom catalog filter\n        return new CatalogFilter() {\n            @Override\n            public boolean canAccess(WorkspaceInfo workspace) {\n                // Your custom logic\n                return true;\n            }\n\n            @Override\n            public boolean canAccess(LayerInfo layer) {\n                // Your custom logic\n                return true;\n            }\n        };\n    }\n}\n</code></pre> <p>Then register your custom filter builder:</p> <pre><code>&lt;bean id=\"aclCatalogFilterBuilder\" \n      class=\"com.example.CustomCatalogFilterBuilder\"/&gt;\n</code></pre>"},{"location":"developer_guide/plugin_development/#creating-a-custom-container-limit-resolver","title":"Creating a Custom Container Limit Resolver","text":"<p>You can customize how container limits are resolved:</p> <pre><code>import org.geoserver.acl.plugin.accessmanager.ContainerLimitResolver;\nimport org.geoserver.catalog.LayerGroupInfo;\nimport org.geoserver.catalog.LayerInfo;\n\npublic class CustomContainerLimitResolver implements ContainerLimitResolver {\n    @Override\n    public AccessInfo resolveContainerLimits(LayerGroupInfo container, \n                                            List&lt;LayerInfo&gt; layers,\n                                            List&lt;AccessInfo&gt; accessInfos) {\n        // Your custom logic\n        return mergeAccessInfos(accessInfos);\n    }\n\n    private AccessInfo mergeAccessInfos(List&lt;AccessInfo&gt; accessInfos) {\n        // Implement your merging logic\n        // ...\n    }\n}\n</code></pre> <p>Then register your custom resolver:</p> <pre><code>&lt;bean id=\"aclContainerLimitResolver\" \n      class=\"com.example.CustomContainerLimitResolver\"/&gt;\n</code></pre>"},{"location":"developer_guide/plugin_development/#plugin-configuration","title":"Plugin Configuration","text":""},{"location":"developer_guide/plugin_development/#configuration-properties","title":"Configuration Properties","text":"<p>The plugin supports several configuration properties:</p> <ul> <li>ACL Services URL: URL of the ACL service</li> <li>Instance Name: Instance identifier</li> <li>Cache Configuration: Cache settings</li> <li>Connection Settings: Connection parameters</li> </ul>"},{"location":"developer_guide/plugin_development/#geoserver-configuration","title":"GeoServer Configuration","text":"<p>Configure the plugin in GeoServer:</p> <ol> <li>Log in to the GeoServer Admin interface</li> <li>Navigate to \"Security\" \u2192 \"GeoServer ACL\"</li> <li>Configure the plugin settings</li> <li>Click \"Save\"</li> </ol>"},{"location":"developer_guide/plugin_development/#programmatic-configuration","title":"Programmatic Configuration","text":"<p>You can also configure the plugin programmatically:</p> <pre><code>AccessManagerConfig config = new AccessManagerConfig();\nconfig.setServicesUrl(\"http://localhost:8080/acl\");\nconfig.setInstanceName(\"default\");\nconfig.setCacheEnabled(true);\nconfig.setCacheSize(1000);\nconfig.setCacheExpiryMinutes(30);\n\n// Apply the configuration\nAccessManagerConfigProvider configProvider = applicationContext.getBean(AccessManagerConfigProvider.class);\nconfigProvider.setConfig(config);\n</code></pre>"},{"location":"developer_guide/plugin_development/#integration-testing","title":"Integration Testing","text":"<p>To test your plugin extensions, create integration tests:</p> <pre><code>import org.geoserver.acl.plugin.accessmanager.ACLResourceAccessManager;\nimport org.geoserver.data.test.MockData;\nimport org.geoserver.test.GeoServerSystemTestSupport;\nimport org.junit.Test;\n\npublic class CustomUserResolverTest extends GeoServerSystemTestSupport {\n\n    @Test\n    public void testUserResolution() {\n        // Set up authentication\n        login(\"admin\", \"geoserver\", \"ROLE_ADMINISTRATOR\");\n\n        // Get the access manager\n        ACLResourceAccessManager accessManager = applicationContext.getBean(ACLResourceAccessManager.class);\n\n        // Test with a layer\n        LayerInfo layer = getCatalog().getLayerByName(MockData.BASIC_POLYGONS.getLocalPart());\n        AccessLimits limits = accessManager.getAccessLimits(user, layer);\n\n        // Assert expected behavior\n        assertNotNull(limits);\n        // Additional assertions\n    }\n}\n</code></pre>"},{"location":"developer_guide/plugin_development/#common-customization-scenarios","title":"Common Customization Scenarios","text":""},{"location":"developer_guide/plugin_development/#custom-authentication-integration","title":"Custom Authentication Integration","text":"<p>To integrate with a custom authentication system:</p> <ol> <li>Create a custom AccessRequestUserResolver</li> <li>Implement logic to extract user information from your authentication system</li> <li>Register the resolver in the Spring context</li> </ol>"},{"location":"developer_guide/plugin_development/#custom-rule-evaluation","title":"Custom Rule Evaluation","text":"<p>To customize rule evaluation logic:</p> <ol> <li>Create a custom AuthorizationService implementation</li> <li>Override the rule evaluation process</li> <li>Register your service in the Spring context</li> </ol>"},{"location":"developer_guide/plugin_development/#custom-ui-for-rule-management","title":"Custom UI for Rule Management","text":"<p>To create a custom UI for rule management:</p> <ol> <li>Extend the ACL UI panel</li> <li>Create your custom UI components</li> <li>Register them in the GeoServer web application context</li> </ol>"},{"location":"developer_guide/plugin_development/#deploying-plugin-extensions","title":"Deploying Plugin Extensions","text":"<p>To deploy your plugin extensions:</p> <ol> <li>Create a JAR containing your extensions</li> <li>Add required dependencies</li> <li>Create a Spring context file with your bean definitions</li> <li>Place the JAR in GeoServer's WEB-INF/lib directory</li> <li>Restart GeoServer</li> </ol>"},{"location":"developer_guide/plugin_development/#troubleshooting-plugin-development","title":"Troubleshooting Plugin Development","text":""},{"location":"developer_guide/plugin_development/#common-issues","title":"Common Issues","text":""},{"location":"developer_guide/plugin_development/#classnotfoundexception","title":"ClassNotFoundException","text":"<p>If you encounter ClassNotFoundException:</p> <ol> <li>Check that all required dependencies are included</li> <li>Verify JAR packaging includes the classes</li> <li>Check for conflicts with existing GeoServer libraries</li> </ol>"},{"location":"developer_guide/plugin_development/#spring-bean-autowiring-issues","title":"Spring Bean Autowiring Issues","text":"<p>If beans aren't being autowired correctly:</p> <ol> <li>Verify Spring context configuration</li> <li>Check component scanning settings</li> <li>Ensure bean names don't conflict</li> </ol>"},{"location":"developer_guide/plugin_development/#authentication-problems","title":"Authentication Problems","text":"<p>If authentication doesn't work as expected:</p> <ol> <li>Check AccessRequestUserResolver implementation</li> <li>Verify authentication objects contain expected information</li> <li>Enable debug logging for authentication components</li> </ol>"},{"location":"developer_guide/plugin_development/#debugging-tips","title":"Debugging Tips","text":"<ol> <li> <p>Enable Debug Logging:    <pre><code>&lt;logger name=\"org.geoserver.acl\" level=\"DEBUG\"/&gt;\n</code></pre></p> </li> <li> <p>Use GeoServer's Development Mode:    <pre><code>-DGEOSERVER_CSRF_DISABLED=true -DGEOSERVER_CONSOLE_DISABLED=true\n</code></pre></p> </li> <li> <p>Use Remote Debugging:    <pre><code>JAVA_OPTS=\"-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n\"\n</code></pre></p> </li> </ol>"},{"location":"developer_guide/plugin_development/#best-practices","title":"Best Practices","text":"<ol> <li>Follow GeoServer Conventions: Maintain compatibility with GeoServer's design</li> <li>Use Dependency Injection: Use Spring for managing components</li> <li>Write Tests: Create comprehensive integration tests</li> <li>Handle Errors Gracefully: Provide meaningful error messages</li> <li>Document Extensions: Document your extensions thoroughly</li> <li>Consider Performance: Be mindful of performance impacts</li> <li>Maintain Backward Compatibility: Ensure compatibility with existing configurations</li> </ol>"},{"location":"developer_guide/release_guide/","title":"Release Guide","text":"<p>This document describes the release process for GeoServer ACL.</p>"},{"location":"developer_guide/release_guide/#overview","title":"Overview","text":"<p>GeoServer ACL uses a CI-friendly release process where versions are determined by git tags rather than requiring manual updates to <code>pom.xml</code> files. The release process involves:</p> <ol> <li>Creating and pushing a git tag</li> <li>GitHub Actions automatically builds and publishes the Docker image</li> <li>Jenkins job publishes JAR artifacts to OSGeo repository</li> </ol>"},{"location":"developer_guide/release_guide/#prerequisites","title":"Prerequisites","text":"<ul> <li>Write access to the GitHub repository</li> <li>Access to Jenkins at build.geoserver.org</li> <li>Docker Hub credentials configured in GitHub secrets</li> <li>Maven credentials for OSGeo repository configured in Jenkins</li> </ul>"},{"location":"developer_guide/release_guide/#release-process","title":"Release Process","text":""},{"location":"developer_guide/release_guide/#1-prepare-the-release","title":"1. Prepare the Release","text":"<p>Ensure the <code>main</code> branch is in a releasable state:</p> <pre><code># Ensure you're on main and up to date\ngit checkout main\ngit pull origin main\n\n# Run tests locally\nmake test\n\n# Verify the build\nmake package\n</code></pre>"},{"location":"developer_guide/release_guide/#2-create-and-push-the-release-tag","title":"2. Create and Push the Release Tag","text":"<p>Create a git tag with the release version:</p> <pre><code># Create the tag (e.g., 3.0.0)\ngit tag 3.0.0\n\n# Push the tag to GitHub\ngit push origin 3.0.0\n</code></pre> <p>Note: The tag name will be used as the version number. Use semantic versioning (e.g., <code>2.9.0</code>, <code>3.0.0-RC1</code>).</p>"},{"location":"developer_guide/release_guide/#3-docker-image-release-automated","title":"3. Docker Image Release (Automated)","text":"<p>GitHub Actions will automatically: - Detect the new tag - Extract the version from the tag name - Build the Docker image for <code>linux/amd64</code> and <code>linux/arm64</code> - Push to Docker Hub as <code>geoservercloud/geoserver-acl:&lt;version&gt;</code></p> <p>Monitor the build at: https://github.com/geoserver/geoserver-acl/actions</p>"},{"location":"developer_guide/release_guide/#4-maven-artifacts-release-jenkins","title":"4. Maven Artifacts Release (Jenkins)","text":"<p>Trigger the Jenkins job at build.geoserver.org:</p> <ol> <li>Navigate to the GeoServer ACL <code>geoserver-acl-release</code> job</li> <li>Click \"Build with Parameters\"</li> <li>Enter the tag name in the <code>TAG</code> parameter (e.g., <code>3.0.0</code>)</li> <li>Click \"Build\"</li> </ol> <p>The Jenkins job will: - Checkout <code>refs/tags/${TAG}</code> - Build and deploy artifacts to OSGeo releases repository - Artifacts will be versioned according to the tag name</p>"},{"location":"developer_guide/release_guide/#5-create-github-release","title":"5. Create GitHub Release","text":"<p>While artifacts are published automatically to Docker Hub and Maven Central, you should create a release entry on GitHub to host the changelog.</p> <ol> <li>Go to the Releases page</li> <li>Draft a new release using the tag you just pushed (e.g., <code>3.0.0</code>)</li> <li>Generate release notes (using the \"Generate release notes\" button) or paste the changelog</li> <li>Publish the release</li> </ol>"},{"location":"developer_guide/release_guide/#6-verify-the-release","title":"6. Verify the Release","text":"<p>After both processes complete, verify:</p> <p>Docker Image: <pre><code>docker pull geoservercloud/geoserver-acl:3.0.0\n</code></pre></p> <p>Maven Artifacts: Check the OSGeo releases repository: - https://repo.osgeo.org/repository/Geoserver-releases/</p>"},{"location":"developer_guide/release_guide/#7-update-documentation","title":"7. Update Documentation","text":"<p>After a successful release: - Update the changelog (if applicable) - Update version references in documentation - Announce the release</p>"},{"location":"developer_guide/release_guide/#snapshot-releases","title":"Snapshot Releases","text":"<p>For snapshot releases, simply push to the <code>main</code> branch:</p> <pre><code>git push origin main\n</code></pre> <p>This will: - Build Docker image tagged as <code>geoservercloud/geoserver-acl:3.0-SNAPSHOT</code> - Use the version defined in <code>pom.xml</code> (<code>${revision}</code> property)</p>"},{"location":"developer_guide/release_guide/#version-information","title":"Version Information","text":"<p>To check the current version:</p> <pre><code># From the Makefile\nmake show-version\n\n# From Maven directly\n./mvnw help:evaluate -Dexpression=project.version -q -DforceStdout\n</code></pre>"},{"location":"developer_guide/release_guide/#troubleshooting","title":"Troubleshooting","text":"<p>Problem: Jenkins build fails with version mismatch</p> <p>Solution: Ensure the TAG parameter matches an existing git tag exactly</p> <p>Problem: Docker image push fails</p> <p>Solution: Check GitHub secrets for Docker Hub credentials (<code>DOCKER_HUB_USERNAME</code> and <code>DOCKER_HUB_ACCESS_TOKEN</code>)</p> <p>Problem: Maven deploy fails with authentication error</p> <p>Solution: Verify <code>$MAVEN_SETTINGS</code> environment variable is configured in Jenkins with correct OSGeo repository credentials</p>"},{"location":"developer_guide/release_guide/#release-repositories","title":"Release Repositories","text":"<ul> <li>Docker Images: https://hub.docker.com/r/geoservercloud/geoserver-acl</li> <li>Maven Releases: https://repo.osgeo.org/repository/Geoserver-releases/</li> <li>Maven Snapshots: https://repo.osgeo.org/repository/geoserver-snapshots/</li> </ul>"},{"location":"user_guide/","title":"User Guide","text":"<p>This guide is intended for end users of GeoServer who are accessing resources protected by GeoServer ACL. If you're an administrator looking to configure GeoServer ACL, please see the Administrator Guide.</p>"},{"location":"user_guide/#what-is-geoserver-acl","title":"What is GeoServer ACL?","text":"<p>GeoServer ACL is an authorization system that controls access to GeoServer resources. As a user, you don't interact with GeoServer ACL directly - instead, it works behind the scenes to determine what you can and cannot access when you use GeoServer services.</p>"},{"location":"user_guide/#how-access-control-affects-you","title":"How Access Control Affects You","text":"<p>Depending on how your administrator has configured GeoServer ACL, you may experience the following:</p> <ul> <li>Filtered Workspaces and Layers: You might only see certain workspaces and layers in GeoServer's capabilities documents</li> <li>Spatial Restrictions: Your view of geographic data might be limited to specific areas</li> <li>Attribute Filtering: Certain attributes or properties of the data might be hidden</li> <li>Service Limitations: You might be able to view data (WMS) but not download it (WFS), or vice versa</li> <li>Workspace Administration: If you're a workspace administrator, you'll only be able to manage resources within your authorized workspaces</li> </ul>"},{"location":"user_guide/#common-scenarios","title":"Common Scenarios","text":""},{"location":"user_guide/#viewing-maps-wms","title":"Viewing Maps (WMS)","text":"<p>When you make a WMS GetCapabilities request, GeoServer ACL filters the response to only include layers you have access to. When you request a map with GetMap, you may receive:</p> <ul> <li>A full map if you have full access</li> <li>A map clipped to your allowed geographic area</li> <li>A limited view of the data based on your attribute permissions</li> <li>An access denied error if you don't have any access to the layer</li> </ul>"},{"location":"user_guide/#downloading-data-wfs","title":"Downloading Data (WFS)","text":"<p>When working with WFS:</p> <ul> <li>GetCapabilities will only show features you can access</li> <li>GetFeature requests will filter out features outside your allowed area</li> <li>Attributes may be filtered based on your permissions</li> <li>Insert, Update, and Delete operations may be restricted</li> </ul>"},{"location":"user_guide/#other-services","title":"Other Services","text":"<p>GeoServer ACL can restrict access to any OGC service provided by GeoServer, including:</p> <ul> <li>Web Coverage Service (WCS)</li> <li>Web Processing Service (WPS)</li> <li>Web Map Tile Service (WMTS)</li> <li>Catalog Services for the Web (CSW)</li> </ul>"},{"location":"user_guide/#using-geoserver-with-access-restrictions","title":"Using GeoServer with Access Restrictions","text":"<p>If you're using a GIS client like QGIS, ArcGIS, or a web mapping application, you'll generally authenticate through your client application. The client will pass your credentials to GeoServer, and GeoServer ACL will apply the appropriate restrictions.</p> <p>Your experience will be seamless - you'll simply see and access the resources you're authorized to use. If you encounter \"Access Denied\" errors or missing data, it's likely due to authorization restrictions.</p>"},{"location":"user_guide/access_control/","title":"Understanding Access Control","text":"<p>GeoServer ACL uses a priority-based rule system to determine exactly what resources a user can access. This page explains the core concepts behind these rules and how they are evaluated.</p>"},{"location":"user_guide/access_control/#core-concepts","title":"Core Concepts","text":"<p>The authorization model is built around defining Who can do What, and How they can do it.</p> <ol> <li>The Actor (Who): The user, role, or IP address initiating the request.</li> <li>The Resource (What): The specific data being accessed (Workspace, Layer).</li> <li>The Access Method (How): The service (e.g., WMS, WFS) and operation (e.g., GetMap) used to access the resource.</li> </ol>"},{"location":"user_guide/access_control/#rule-structure","title":"Rule Structure","text":"<p>A rule is essentially a \"match\" condition followed by an \"action\".</p>"},{"location":"user_guide/access_control/#match-conditions","title":"Match Conditions","text":"<p>A rule applies if the incoming request matches criteria defined by the administrator:</p> <ul> <li>Who: Does the request come from a specific user (e.g., <code>jsmith</code>) or role (e.g., <code>ROLE_MANAGER</code>)?</li> <li>What: Is the request for a specific workspace or layer?</li> <li>How: Is this a WMS (map view) or WFS (data download) request?</li> </ul>"},{"location":"user_guide/access_control/#actions","title":"Actions","text":"<p>If a rule matches, one of the following actions is taken:</p> <ul> <li>ALLOW: The request proceeds normally.</li> <li>DENY: The request is blocked immediately.</li> <li>LIMIT: The request proceeds, but with filters applied:<ul> <li>Spatial Filter: Only features within a drawn polygon are returned.</li> <li>Attribute Filter: Sensitive columns (e.g., \"owner_name\", \"phone_number\") are removed from the result.</li> </ul> </li> </ul>"},{"location":"user_guide/access_control/#how-rules-are-prioritized","title":"How Rules Are Prioritized","text":"<p>Since multiple rules might match a single request, Priority is key.</p> <ol> <li>Explicit Priority: Administrators assign a numeric priority to each rule.</li> <li>Evaluation Order: The engine checks rules from highest priority to lowest.</li> <li>First Match Wins: The moment a rule matches the request, its action is applied, and further processing stops.</li> <li>Default Fallback: If no rules match, the default policy (usually DENY) is applied.</li> </ol> <p>Tip: Specific rules (e.g., \"Allow <code>jsmith</code> to see <code>roads</code>\") should always have higher priority than general rules (e.g., \"Deny everyone access to <code>roads</code>\").</p>"},{"location":"user_guide/access_control/#practical-example","title":"Practical Example","text":"<p>Imagine a city planning system with a \"Zoning\" layer containing sensitive property data.</p> Priority Actor Service Layer Action Result 1 (High) <code>ROLE_ADMIN</code> Any Zoning ALLOW Admins see everything. 2 <code>ROLE_PLANNER</code> Any Zoning LIMIT (City Center) Planners only see zoning in the city center. 3 <code>ROLE_PUBLIC</code> WMS Zoning LIMIT (Hide 'Owner') Public can view the map, but cannot see the 'Owner' attribute. 4 (Low) Any WFS Zoning DENY No one (except Admins/Planners above) can download the raw data."},{"location":"user_guide/access_control/#in-this-scenario","title":"In this scenario:","text":"<ul> <li>An Admin requesting the layer gets full access (Rule 1 matches).</li> <li>A Planner gets spatially filtered data (Rule 2 matches).</li> <li>A Public user sees the map but no owner names (Rule 3 matches).</li> <li>A Public user trying to download the data (WFS) gets blocked (Rule 4 matches).</li> </ul>"},{"location":"user_guide/access_control/#handling-access-errors","title":"Handling Access Errors","text":"<p>If a user reports they cannot see a layer or are missing data:</p> <ol> <li>Check Permissions: Ensure a rule exists that explicitly allows them access.</li> <li>Check Priority: Verify a higher-priority \"DENY\" rule isn't blocking them.</li> <li>Check Filters: If they see the layer but features are missing, a spatial filter might be active.</li> </ol>"},{"location":"user_guide/ows_services/","title":"OGC Services Integration","text":"<p>GeoServer ACL enforces authorization controls across standard OGC Web Services (OWS). This page details how these controls manifest in service responses and workflows.</p>"},{"location":"user_guide/ows_services/#common-authorization-patterns","title":"Common Authorization Patterns","text":"<p>Across all services (WMS, WFS, WCS, etc.), ACL applies consistent enforcement mechanisms:</p>"},{"location":"user_guide/ows_services/#capabilities-filtering","title":"Capabilities Filtering","text":"<p>Service metadata documents (e.g., <code>GetCapabilities</code>) are dynamically filtered. Users only see layers, feature types, or coverages they are explicitly authorized to access. If a user has no access to a resource, it is completely omitted from the capabilities response.</p> <p>A future enhancement could involve overriding the layers bounding boxes in the capabilities responses to match the spatial constraints.</p>"},{"location":"user_guide/ows_services/#spatial-constraints","title":"Spatial Constraints","text":"<p>Requests involving spatial queries (e.g., <code>bbox</code> parameters) are intersected with the user's authorized area.</p> <ul> <li>Intersection: Only data within the user's allowed geometry is returned.</li> </ul> <p>A nice future enhancement may involve adding a Disjoint constraint: Requests strictly outside the authorized area may return empty results or specific exceptions depending on the service.</p>"},{"location":"user_guide/ows_services/#attribute-filtering","title":"Attribute Filtering","text":"<p>When attribute-level rules are active, the service response schema is modified on the fly. Restricted columns are removed from:</p> <ul> <li>WFS <code>GetFeature</code> responses (GML/JSON).</li> <li>WMS <code>GetFeatureInfo</code> results.</li> </ul> <p>A future enhancement could be limiting WCS coverage bands</p>"},{"location":"user_guide/ows_services/#service-specific-behaviors","title":"Service-Specific Behaviors","text":""},{"location":"user_guide/ows_services/#web-map-service-wms","title":"Web Map Service (WMS)","text":"<ul> <li>GetMap: The generated map image is clipped to the authorized geometry. Areas outside the user's permissions appear transparent or empty.</li> <li>GetFeatureInfo: Queries are validated against spatial permissions. Clicking on a visible feature outside the user's interactive allowance returns no data.</li> </ul>"},{"location":"user_guide/ows_services/#web-feature-service-wfs","title":"Web Feature Service (WFS)","text":"<ul> <li>GetFeature: Returns only features satisfying the spatial filter.</li> <li>Transactional WFS (WFS-T): Write operations (<code>Insert</code>, <code>Update</code>, <code>Delete</code>) are strictly validated. Users cannot modify features outside their spatial scope or edit read-only attributes.<ul> <li>Attempts to write to restricted areas result in a Service Exception.</li> </ul> </li> </ul>"},{"location":"user_guide/ows_services/#web-coverage-service-wcs","title":"Web Coverage Service (WCS)","text":"<ul> <li>GetCoverage: Raster data is cropped to the authorized region. Requesting a subset entirely outside the allowed area results in an exception or empty coverage.</li> </ul>"},{"location":"user_guide/ows_services/#web-map-tile-service-wmts","title":"Web Map Tile Service (WMTS)","text":"<ul> <li>GetTile: Access is validated per tile.<ul> <li>Tiles intersecting the authorized area are returned.</li> <li>Tiles fully outside the authorized area return a 403 Forbidden or a blank tile, depending on configuration.</li> <li>Caching Implications: GeoWebCache integration ensures that cached tiles respect underlying ACL rules, though this may impact cache hit rates if user-specific rules are highly fragmented.</li> </ul> </li> </ul>"},{"location":"user_guide/ows_services/#web-processing-service-wps","title":"Web Processing Service (WPS)","text":"<ul> <li>Execute: Processes are authorized based on the input data. If a process attempts to operate on a restricted layer or region, execution is blocked or the input is pre-filtered.</li> </ul>"},{"location":"user_guide/ows_services/#error-handling","title":"Error Handling","text":"<p>Clients interacting with ACL-protected services should be prepared for standard OGC exception reports and HTTP status codes:</p> <ul> <li>HTTP 403 Forbidden: The user lacks permission for the requested operation or resource.</li> <li>Empty Result Sets: A valid request that intersects no authorized data (e.g., a WFS query for a region the user cannot see) returns an empty feature collection, not an error.</li> <li>Service Exceptions: XML/JSON exception reports detailing specific constraint violations (e.g., \"Write access denied for attribute 'zoning_code'\").</li> </ul>"},{"location":"user_guide/troubleshooting/","title":"Troubleshooting","text":"<p>This guide addresses common issues encountered when interacting with GeoServer ACL.</p>"},{"location":"user_guide/troubleshooting/#diagnosing-connectivity","title":"Diagnosing Connectivity","text":"<p>Before investigating permission issues, verify that the ACL service is reachable and correctly integrated.</p> <p>Symptoms: All requests fail, or the GeoServer logs show \"Connection Refused\" to the ACL service.</p> <p>Verification:</p> <ol> <li>Check the ACL service health endpoint: <code>http://&lt;acl-host&gt;:8081/actuator/health</code>.</li> <li>Verify the GeoServer ACL plugin configuration in <code>security/acl/config.xml</code> points to the correct URL.</li> </ol>"},{"location":"user_guide/troubleshooting/#access-denied-http-403","title":"Access Denied (HTTP 403)","text":"<p>Symptom: The server explicitly rejects the request with a <code>403 Forbidden</code> status.</p> <p>Causes &amp; Solutions:</p> <ul> <li>Missing Rule: By default, ACL denies all access. Ensure a rule explicitly grants permission for the User/Role and Resource combination.</li> <li>Service Restriction: A user may have <code>ACCESS</code> to a layer (WMS) but be blocked from downloading data (WFS). Check Service-level rules.</li> <li>Workspace Admin Limits: A workspace administrator trying to access global resources or other workspaces will receive a 403.</li> </ul> <p>Diagnosis: Check the ACL audit logs or the HTTP response body. ACL often provides a specific exception code (e.g., <code>ServiceAccessDenied</code>).</p>"},{"location":"user_guide/troubleshooting/#empty-or-incomplete-data","title":"Empty or Incomplete Data","text":"<p>Symptom: The request succeeds (HTTP 200), but the map is blank, features are missing, or attributes are dropped.</p> <p>Causes &amp; Solutions:</p> <ul> <li>Spatial Filtering: The user has <code>LIMIT</code> access restricted to a specific geometry. If the requested BBOX does not intersect this geometry, the result is valid but empty.<ul> <li>Test: Try requesting a known valid area for that user.</li> </ul> </li> <li>Attribute Filtering: If specific columns are missing from WFS/GetFeatureInfo, an Attribute Filter is likely active.<ul> <li>Test: Check if the user has <code>READ</code> access to the specific attributes in the Data Rules.</li> </ul> </li> <li>Layer Group Visibility: If a Layer Group is empty, the user might lack access to the individual layers contained within it.</li> </ul>"},{"location":"user_guide/troubleshooting/#authentication-failures-http-401","title":"Authentication Failures (HTTP 401)","text":"<p>Symptom: Repeated login prompts or <code>401 Unauthorized</code>.</p> <p>Causes &amp; Solutions:</p> <ul> <li>Synchronization: The user exists in GeoServer but not in the ACL database (or vice versa) if using synchronized user stores.</li> <li>Role Mapping: The user is authenticated, but their roles do not match any active rules.<ul> <li>Diagnosis: Check the <code>X-GeoServer-ACL-Roles</code> header in the debug logs to see what roles the ACL engine received.</li> </ul> </li> </ul>"},{"location":"user_guide/troubleshooting/#diagnostic-tools","title":"Diagnostic Tools","text":""},{"location":"user_guide/troubleshooting/#curl","title":"cURL","text":"<p>Use cURL to isolate the API from client-side issues (like QGIS caching).</p> <pre><code># Test Capabilities (Basic Auth)\ncurl -v -u user:password \\\n  \"http://localhost:8080/geoserver/wfs?request=GetCapabilities\"\n\n# Test Specific Feature Access\ncurl -v -u user:password \\\n  \"http://localhost:8080/geoserver/wfs?request=GetFeature&amp;typeName=ws:layer&amp;count=1\"\n</code></pre>"},{"location":"user_guide/troubleshooting/#browser-devtools","title":"Browser DevTools","text":"<ol> <li>Open Network Tab.</li> <li>Trigger the map load.</li> <li>Inspect red (failed) requests.<ul> <li>404: Resource doesn't exist (or is hidden by ACL).</li> <li>403: Permission denied.</li> <li>500: System error (check server logs).</li> </ul> </li> </ol>"},{"location":"user_guide/workspace_admin/","title":"Workspace Administration","text":"<p>GeoServer ACL enables a delegated administration model, allowing designated users to manage specific workspaces without requiring full system administrator privileges. This is achieved through Admin Rules.</p>"},{"location":"user_guide/workspace_admin/#role-definition","title":"Role Definition","text":"<p>A Workspace Administrator is a standard GeoServer user or role that has been granted administrative authority over one or more workspaces via an ACL Admin Rule.</p> <p>Within their assigned workspaces, these administrators can:</p> <ul> <li>Manage Data: Create and configure Data Stores (PostGIS, Shapefile, etc.).</li> <li>Publish Resources: Configure and publish Layers and Layer Groups.</li> <li>Style Data: Create and edit styles (SLD, CSS) limited to their workspace.</li> <li>View Settings: Access workspace-specific configuration panels.</li> </ul> <p>They cannot:</p> <ul> <li>Modify global settings (Security, Services, Logging).</li> <li>Access or administer workspaces they are not explicitly assigned to.</li> <li>Manage global roles or users.</li> </ul>"},{"location":"user_guide/workspace_admin/#configuration","title":"Configuration","text":"<p>Workspace administration is configured in the Admin Rules section of the ACL management interface.</p> <ol> <li>Grant Access: An Admin Rule is created linking a <code>Role</code> (e.g., <code>ROLE_NYC_ADMIN</code>) to a <code>Workspace</code> (e.g., <code>nyc_data</code>) with <code>ADMIN</code> access.</li> <li>Enforcement: When a user with <code>ROLE_NYC_ADMIN</code> logs into the GeoServer Web UI, the interface automatically adjusts. The global sidebar is restricted, showing only the \"Data\" and \"Layer Preview\" sections relevant to the <code>nyc_data</code> workspace.</li> </ol>"},{"location":"user_guide/workspace_admin/#interface-behavior","title":"Interface Behavior","text":""},{"location":"user_guide/workspace_admin/#web-administration","title":"Web Administration","text":"<p>The GeoServer Web UI adapts to the user's permissions:</p> <ul> <li>Home Page: Displays only authorized workspaces.</li> <li>Data Panel: \"Stores\", \"Layers\", and \"Styles\" pages list only resources belonging to the managed workspaces.</li> <li>Service Configuration: Workspace-specific service settings (WFS/WMS limits) are editable if the Admin Rule permits.</li> </ul>"},{"location":"user_guide/workspace_admin/#rest-api","title":"REST API","text":"<p>Workspace administrators can manage resources via the standard GeoServer REST API. The ACL plugin intercepts these calls:</p> <pre><code>GET /geoserver/rest/workspaces/nyc_data/datastores.json\n</code></pre> <ul> <li>Authorized: Returns the list of stores.</li> <li>Unauthorized (e.g., accessing a different workspace): Returns <code>403 Forbidden</code>.</li> </ul>"},{"location":"user_guide/workspace_admin/#limitations-acl-interaction","title":"Limitations &amp; ACL Interaction","text":"<ul> <li>Layer Security: Being a workspace administrator does not automatically bypass Data Access Rules. If a specific layer has a strict \"Deny\" rule for the administrator's role, they may be able to see the layer configuration but not preview the data.</li> <li>Style Management: Styles must be created inside the workspace. Global styles are read-only or invisible depending on configuration.</li> <li>Resource Creation: Administrators can only create resources that reside strictly within their workspace.</li> </ul>"},{"location":"user_guide/workspace_admin/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>\"I can't see the 'Add Store' button\": Verify that the Admin Rule explicitly grants <code>ADMIN</code> (not just <code>READ</code>) access to the workspace.</li> <li>\"I can see the layer but not the data\": Check Data Access Rules. Admin privileges control configuration access; Data Access rules control map/feature access. You may need a separate Data Rule granting <code>ACCESS</code> to the administrator role.</li> <li>Global vs. Workspace Styles: Ensure styles are being created within the workspace. Attempts to edit global styles will fail.</li> </ul>"}]}