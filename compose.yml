version: "3.1"

volumes:
  acl_data:

services:
  acldb:
    image: postgis/postgis:15-3.3
    environment:
      - POSTGRES_DB=acl
      - POSTGRES_USER=acl
      - POSTGRES_PASSWORD=acls3cr3t
    volumes:
      - acl_data:/var/lib/postgresql/data
    restart: always
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 2G

  acl:
    image: geoservercloud/geoserver-acl:2.0-SNAPSHOT
    volumes:
      - ./compose-acl-config.yml:/opt/app/bin/acl.yml
    ports:
      - 8080:8080
      - 8081:8081
    deploy:
      resources:
        limits:
          cpus: '4.0'
          memory: 2G

